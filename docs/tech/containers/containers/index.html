<!doctype html>
<html
  lang="en"
  dir="ltr"
  class="scroll-smooth"
  data-default-appearance="light"
  data-auto-appearance="false"><head>
  <meta charset="utf-8">
  
    <meta http-equiv="content-language" content="en">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color">

  
  
    <title>Containers &middot; </title>
    <meta name="title" content="Containers &middot; ">
  

  
  
    <meta name="description" content="Podman Podman Podman">
  
  
  
  
  <link rel="canonical" href="https://davidwrites.xyz/tech/containers/containers/">
  

  
  
  

  
  <meta property="og:url" content="https://davidwrites.xyz/tech/containers/containers/">
  <meta property="og:title" content="Containers">
  <meta property="og:description" content="Podman Podman Podman">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="tech">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Containers">
  <meta name="twitter:description" content="Podman Podman Podman">

  
  
  
  
    
      
    
  
    
      
    
  
    
      
    
  
  
    
  

  
  
  
  
  
  

  

  
  
  
  
  
  
  
    
  
  
    
  
  
  <link
    type="text/css"
    rel="stylesheet"
    href="/css/main.bundle.min.55454138fbaa36c0232d68135cd9933115627c813e846361f82ebc8dc6d6a4557af89124e41aa465c677592556acb50643a1e8e9a77adfdd6daf990fd094a009.css"
    integrity="sha512-VUVBOPuqNsAjLWgTXNmTMRVifIE&#43;hGNh&#43;C68jcbWpFV6&#43;JEk5BqkZcZ3WSVWrLUGQ6Ho6ad6391tr5kP0JSgCQ==">

  
  
  <script
    type="text/javascript"
    src="/js/appearance.min.b3e04755916f0df261b5d61a68854cdfe374f4f0788bd95c7dd4a8493829036d999f7931d810683ea8adb094c97c2f5616e95748b0b9e3da4a19070d27b2c99b.js"
    integrity="sha512-s&#43;BHVZFvDfJhtdYaaIVM3&#43;N09PB4i9lcfdSoSTgpA22Zn3kx2BBoPqitsJTJfC9WFulXSLC549pKGQcNJ7LJmw=="></script>
  
  
  
  
  
  
    
    <script src="/lib/zoom/zoom.min.umd.a527109b68c082a70f3697716dd72a9d5aa8b545cf800cecbbc7399f2ca6f6e0ce3e431f2062b48bbfa47c9ea42822714060bef309be073f49b9c0e30d318d7b.js" integrity="sha512-pScQm2jAgqcPNpdxbdcqnVqotUXPgAzsu8c5nyym9uDOPkMfIGK0i7&#43;kfJ6kKCJxQGC&#43;8wm&#43;Bz9JucDjDTGNew=="></script>
  

  
  
  
    
  
  
    
  
  
    
  
  
  
  
  
  
    
    <script
      defer
      type="text/javascript"
      id="script-bundle"
      src="/js/main.bundle.min.9cc802d09f28c6af56ceee7bc6e320a39251fdae98243f2a9942f221ac57a9f49c51609699a91794a7b2580ee1deaa8e4d794a68ffa94aa317c66e893ce51e02.js"
      integrity="sha512-nMgC0J8oxq9Wzu57xuMgo5JR/a6YJD8qmULyIaxXqfScUWCWmakXlKeyWA7h3qqOTXlKaP&#43;pSqMXxm6JPOUeAg=="
      data-copy="Copy"
      data-copied="Copied"></script>
  

  
  

<script src="/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js" integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj&#43;KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script>


























  

  

  

  

  





  
  
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
  

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Teches",
    "name": "Containers",
    "headline": "Containers",
    "description": "Podman Podman Podman",
    "abstract": "\u003ch1 class=\u0022relative group\u0022\u003eIntroduction to Containers\n    \u003cdiv id=\u0022introduction-to-containers\u0022 class=\u0022anchor\u0022\u003e\u003c\/div\u003e\n    \n    \u003cspan\n        class=\u0022absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none\u0022\u003e\n        \u003ca class=\u0022text-primary-300 dark:text-neutral-700 !no-underline\u0022 href=\u0022#introduction-to-containers\u0022 aria-label=\u0022Anchor\u0022\u003e#\u003c\/a\u003e\n    \u003c\/span\u003e\n    \n\u003c\/h1\u003e\n\u003cul\u003e\n\u003cli\u003eTake advantage of the native virtualization features available in the Linux kernel.\u003c\/li\u003e\n\u003cli\u003eEach container typically encapsulates one self-contained application that includes all dependencies such as library files, configuration files, software binaries, and services.\u003c\/li\u003e\n\u003c\/ul\u003e\n\u003cp\u003eTraditional server\/ application deployment:\u003c\/p\u003e",
    "inLanguage": "en",
    "url" : "https://davidwrites.xyz/tech/containers/containers/",
    "author" : {
      "@type": "Person",
      "name": ""
    },
    
    
    
    
    
    
    
    
    "mainEntityOfPage": "true",
    "wordCount": "8457"
  }]
  </script>



  
  
    


  

  <script
    data-id="umami-script"
    async
    src="https://analytics.umami.is/script.js"
    data-website-id="60fe8af1-376f-4be3-8f62-d4f24d00a756"></script>




  <script type="text/javascript">
    document.querySelector('script[data-id="umami-script"]').addEventListener("load", function () {
      const type = document.head.querySelector('meta[property = "og:type"]').getAttribute("content");
      let title = document.head.querySelector('meta[property = "og:title"]').getAttribute("content");
      let url = document.head.querySelector('meta[property = "og:url"]').getAttribute("content");
      umami.track(type + ":" + title, { url: url });
    });
  </script>





  

  
  

  
  

  
  
    
      <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
      <script>

    const firebaseConfig = {
      apiKey: "AIzaSyApsKLCbGb5fkkrzxABOtl3-OUuBcRPVsc",
      authDomain: "davidwrites-89dd7.firebaseapp.com",
      projectId: "davidwrites-89dd7",
      storageBucket: "davidwrites-89dd7.firebasestorage.app",
      messagingSenderId: "433139099634",
      appId: "1:433139099634:web:c14275555bd7171e6c6d6b",
      measurementId: "G-XX5507B82W"
    };

        var app = firebase.initializeApp(firebaseConfig);
        var db = firebase.firestore();
        var auth = firebase.auth();

      </script>
    
  

  
  
</head>







  
    
  







  
    
  






  
  
  <body class="flex flex-col h-screen m-auto leading-7 max-w-7xl px-6 sm:px-14 md:px-24 lg:px-32 text-lg bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600">
    <div id="the-top" class="absolute flex self-center">
      <a
        class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
        href="#main-content">
        <span class="font-bold text-primary-600 pe-2 dark:text-primary-400">&darr;</span>
        Skip to main content
      </a>
    </div>
    
    
      













<div
  class="main-menu flex items-center justify-between py-6 md:justify-start gap-x-3 pt-[2px] pr-2 md:pr-4 pb-[3px] pl-0">
  
  
    
    
      <div>
        <a href="/" class="flex">
          <span class="sr-only"></span>
          
            <img
              src="/img/logo.png"
              width="200"
              height="37"
              class="logo max-h-[5rem] max-w-[5rem] object-scale-down object-left nozoom"
              alt="">
          
        </a>
      </div>
    

  <div class="flex flex-1 items-center justify-between">
    <nav class="flex space-x-3">
      
    </nav>
    
  <nav class="hidden md:flex items-center gap-x-5 md:ml-12 h-12">
    
      
        
  <a
  href="/notes/"
  
  class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
  aria-label="Notes"
  title="Book Notes &amp; Reviews">
  
  
    <p class="text-base font-medium">
      Notes
    </p>
  
</a>



      
        
  <a
  href="/articles/"
  
  class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
  aria-label="Articles"
  title="Articles">
  
  
    <p class="text-base font-medium">
      Articles
    </p>
  
</a>



      
        
  <a
  href="/now/"
  
  class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
  aria-label="Now"
  title="Now">
  
  
    <p class="text-base font-medium">
      Now
    </p>
  
</a>



      
        
  <a
  href="https://github.com/davidwritesxyz"
  target="_blank"
  class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
  aria-label="github"
  title="">
  
    <span >
      <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span>
    </span>
  
  
</a>



      
        
  <a
  href=""
  
  class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
  
  title="">
  
  
</a>



      
    

    

    

    
      <button
        id="search-button"
        aria-label="Search"
        class="text-base hover:text-primary-600 dark:hover:text-primary-400"
        title="Search (/)">
        <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
      </button>
    

    
      <div class=" flex items-center">
        <button
          id="appearance-switcher"
          aria-label="Dark mode switcher"
          type="button"
          class="text-base hover:text-primary-600 dark:hover:text-primary-400">
          <div class="flex items-center justify-center dark:hidden">
            <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>
</span>
          </div>
          <div class="items-center justify-center hidden dark:flex">
            <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>
</span>
          </div>
        </button>
      </div>
    
  </nav>

    
  <div class="flex md:hidden items-center gap-x-5 md:ml-12 h-12">
    <span></span>

    

    

    
      <button
        id="search-button-mobile"
        aria-label="Search"
        class="text-base hover:text-primary-600 dark:hover:text-primary-400"
        title="Search (/)">
        <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
      </button>
    

    
      <button
        id="appearance-switcher-mobile"
        aria-label="Dark mode switcher"
        type="button"
        class="text-base hover:text-primary-600 dark:hover:text-primary-400 me-1">
        <div class="flex items-center justify-center dark:hidden">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>
</span>
        </div>
        <div class="items-center justify-center hidden dark:flex">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>
</span>
        </div>
      </button>
    
  </div>

  </div>
  
  <div class="-my-2 md:hidden">
    <div id="menu-button" class="block">
      
        <div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>
</span>
        </div>
        <div
          id="menu-wrapper"
          class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50 pt-[5px]">
          <ul
            class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none text-end max-w-7xl">
            <li id="menu-close-button">
              <span
                class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400">
                <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
              </span>
            </li>

            
              
  <li class="mt-1">
  <a
    href="/notes/"
    
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
    aria-label="Notes"
    title="Book Notes &amp; Reviews">
    
    
      <p class="text-bg font-bg">
        Notes
      </p>
    
  </a>
</li>



            
              
  <li class="mt-1">
  <a
    href="/articles/"
    
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
    aria-label="Articles"
    title="Articles">
    
    
      <p class="text-bg font-bg">
        Articles
      </p>
    
  </a>
</li>



            
              
  <li class="mt-1">
  <a
    href="/now/"
    
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
    aria-label="Now"
    title="Now">
    
    
      <p class="text-bg font-bg">
        Now
      </p>
    
  </a>
</li>



            
              
  <li class="mt-1">
  <a
    href="https://github.com/davidwritesxyz"
    
      target="_blank"
    
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
    aria-label="github"
    title="">
    
      <div >
        <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span>
      </div>
    
    
  </a>
</li>



            
              
  <li class="mt-1">
  <a
    href=""
    
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
    
    title="">
    
    
  </a>
</li>



            

          </ul>
          
        </div>
      
    </div>
  </div>

</div>




  <script>
    (function () {
      var $mainmenu = $(".main-menu");
      var path = window.location.pathname;
      $mainmenu.find('a[href="' + path + '"]').each(function (i, e) {
        $(e).children("p").addClass("active");
      });
    })();
  </script>


    
    <div class="relative flex flex-col grow">
      <main id="main-content" class="grow">
        
  
  <article>
    
    

    
    <header id="single_header" class="mt-5 max-w-prose">
      
      <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
        Containers
      </h1>
      <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
        





  
  



  

  
  
  
    
  

  

  
    
  

  

  

  

  
    
  

  
    
  

  
    
  

  

  


  <div class="flex flex-row flex-wrap items-center">
    
    
      <time datetime="0001-01-01T00:00:00&#43;00:00">1 January 0001</time><span class="px-2 text-primary-500">&middot;</span><span>
  
  
    
    
      
      
        
        
      
      
    
  
  <span
    id="views_tech/containers/Containers.md"
    class="animate-pulse inline-block text-transparent max-h-3 rounded-full -mt-[2px] align-middle bg-neutral-300 dark:bg-neutral-400"
    title="views"
    >loading</span
  >
  <span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
<path fill="currentColor" d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></span>
</span>
<span class="px-2 text-primary-500">&middot;</span><span>
  
  
    
    
      
      
        
        
      
      
    
  
  <span
    id="likes_tech/containers/Containers.md"
    class="animate-pulse inline-block text-transparent max-h-3 rounded-full -mt-[2px] align-middle bg-neutral-300 dark:bg-neutral-400"
    title="likes"
    >loading</span
  >
  <span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path fill="currentColor" d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg></span></span>
</span>
<span class="px-2 text-primary-500">&middot;</span><span>
  <button
    id="button_likes"
    class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    <span id="button_likes_heart" class="inline-block align-text-bottom hidden"
      ><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path fill="currentColor" d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg></span>
    </span>
    <span id="button_likes_emtpty_heart" class="inline-block align-text-bottom"
      ><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path fill="currentColor" d="M244 84L255.1 96L267.1 84.02C300.6 51.37 347 36.51 392.6 44.1C461.5 55.58 512 115.2 512 185.1V190.9C512 232.4 494.8 272.1 464.4 300.4L283.7 469.1C276.2 476.1 266.3 480 256 480C245.7 480 235.8 476.1 228.3 469.1L47.59 300.4C17.23 272.1 0 232.4 0 190.9V185.1C0 115.2 50.52 55.58 119.4 44.1C164.1 36.51 211.4 51.37 244 84C243.1 84 244 84.01 244 84L244 84zM255.1 163.9L210.1 117.1C188.4 96.28 157.6 86.4 127.3 91.44C81.55 99.07 48 138.7 48 185.1V190.9C48 219.1 59.71 246.1 80.34 265.3L256 429.3L431.7 265.3C452.3 246.1 464 219.1 464 190.9V185.1C464 138.7 430.4 99.07 384.7 91.44C354.4 86.4 323.6 96.28 301.9 117.1L255.1 163.9z"/></svg></span></span
    >
    <span id="button_likes_text">&nbsp;Like</span>
  </button>
</span>
    

    
    
  </div>

  

  
  

  
  



      </div>
      
        
  
  
  
  
  
  

  

  
    
    
<div class="flex author">
  
  <div class="place-self-center">
    
    
    <div class="text-2xl sm:text-lg">
</div>
  </div>
</div>

  

  

  
    <div class="mb-5"></div>
  

      
    </header>

    
    <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
      
      
      
      
      
        <div class="order-first lg:ml-auto px-0 lg:order-last lg:ps-8 lg:max-w-2xs">
          <div class="toc ps-5 print:hidden lg:sticky lg:top-10">
            
              <details
  open
  id="TOCView"
  class="toc-right mt-0 overflow-y-auto overscroll-contain scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600 rounded-lg -ms-5 ps-5 pe-2 hidden lg:block">
  <summary
    class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="min-w-[220px] py-2 border-dotted border-s-1 -ms-5 ps-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#containers-and-the-linux-features">Containers and the Linux Features</a></li>
      </ul>
    </li>
    <li><a href="#benefits-of-using-containers">Benefits of Using Containers</a>
      <ul>
        <li><a href="#isolation">Isolation</a></li>
        <li><a href="#loose-coupling">Loose Coupling</a></li>
        <li><a href="#maintenance-independence">Maintenance Independence</a></li>
        <li><a href="#less-overhead">Less Overhead</a></li>
        <li><a href="#transition-time">Transition Time</a></li>
        <li><a href="#transition-independence">Transition Independence</a></li>
        <li><a href="#portability">Portability</a></li>
        <li><a href="#reusability">Reusability</a></li>
        <li><a href="#rapidity">Rapidity</a></li>
        <li><a href="#version-control">Version Control</a></li>
        <li><a href="#container-home-bare-metal-or-virtual-machine">Container Home: Bare Metal or Virtual Machine</a></li>
        <li><a href="#container-images-and-container-registries">Container Images and Container Registries</a></li>
        <li><a href="#rootful-vs-rootless-containers">Rootful vs. Rootless Containers</a></li>
      </ul>
    </li>
    <li><a href="#working-with-images-and-containers">Working with Images and Containers</a>
      <ul>
        <li><a href="#lab-install-necessary-container-support">Lab: Install Necessary Container Support</a></li>
        <li><a href="#podman-command"><code>podman</code> Command</a></li>
        <li><a href="#subcommands">Subcommands</a>
          <ul>
            <li><a href="#image-management">Image Management</a></li>
            <li><a href="#container-management">Container Management</a></li>
          </ul>
        </li>
        <li><a href="#skopeo-command"><code>skopeo</code> Command</a></li>
        <li><a href="#viewing-podman-configuration-and-version">Viewing Podman Configuration and Version</a></li>
        <li><a href="#image-management-1">Image Management</a></li>
        <li><a href="#lab-search-examine-download-and-remove-an-image">Lab: Search, Examine, Download, and Remove an Image</a></li>
        <li><a href="#containerfile">Containerfile</a></li>
        <li><a href="#lab-use-containerfile-to-build-image">Lab: Use Containerfile to Build Image</a></li>
        <li><a href="#basic-container-management">Basic Container Management</a></li>
        <li><a href="#lab-run-interact-with-and-remove-a-named-container">Lab: Run, Interact with, and Remove a Named Container</a></li>
        <li><a href="#lab-run-a-nameless-container-and-auto-remove-it-after-entry-point-command-execution">Lab: Run a Nameless Container and Auto-Remove it After Entry Point Command Execution</a></li>
      </ul>
    </li>
    <li><a href="#advanced-container-management">Advanced Container Management</a></li>
    <li><a href="#containers-and-port-mapping">Containers and Port Mapping</a>
      <ul>
        <li><a href="#lab-configure-port-mapping">Lab: Configure Port Mapping</a></li>
        <li><a href="#exercise-22-7-stop-restart-and-remove-a-container">Exercise 22-7: Stop, Restart, and Remove a Container</a></li>
      </ul>
    </li>
    <li><a href="#containers-and-environment-variables">Containers and Environment Variables</a>
      <ul>
        <li><a href="#lab-pass-and-set-environment-variables">Lab: Pass and Set Environment Variables</a></li>
      </ul>
    </li>
    <li><a href="#containers-and-persistent-storage">Containers and Persistent Storage</a>
      <ul>
        <li><a href="#lab-attach-persistent-storage-and-access-data-across-containers">Lab: Attach Persistent Storage and Access Data Across Containers</a></li>
      </ul>
    </li>
    <li><a href="#container-state-management-with-systemd">Container State Management with systemd</a>
      <ul>
        <li><a href="#lab-configure-a-rootful-container-as-a-systemd-service">Lab: Configure a Rootful Container as a systemd Service</a></li>
        <li><a href="#lab-configure-rootless-container-as-a-systemd-service">Lab: Configure Rootless Container as a systemd Service</a></li>
      </ul>
    </li>
    <li><a href="#containers-diy-labs">Containers DIY Labs</a>
      <ul>
        <li><a href="#lab-launch-named-root-container-with-port-mapping">Lab: Launch Named Root Container with Port Mapping</a></li>
        <li><a href="#lab-launch-nameless-rootless-container-with-two-variables">Lab: Launch Nameless Rootless Container with Two Variables</a></li>
        <li><a href="#lab-launch-named-rootless-container-with-persistent-storage">Lab: Launch Named Rootless Container with Persistent Storage</a></li>
        <li><a href="#lab-launch-named-rootless-container-with-port-mapping-environment-variables-and-persistent-storage">Lab: Launch Named Rootless Container with Port Mapping, Environment Variables, and Persistent Storage</a></li>
        <li><a href="#lab-22-5-control-rootless-container-states-via-systemd">Lab 22-5: Control Rootless Container States via systemd</a></li>
        <li><a href="#lab-22-6-control-rootful-container-states-via-systemd">Lab 22-6: Control Rootful Container States via systemd</a></li>
        <li><a href="#lab-22-7-build-custom-image-using-containerfile">Lab 22-7: Build Custom Image Using Containerfile</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</details>
<details class="toc-inside mt-0 overflow-hidden rounded-lg -ms-5 ps-5 lg:hidden">
  <summary
    class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="py-2 border-dotted border-neutral-300 border-s-1 -ms-5 ps-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#containers-and-the-linux-features">Containers and the Linux Features</a></li>
      </ul>
    </li>
    <li><a href="#benefits-of-using-containers">Benefits of Using Containers</a>
      <ul>
        <li><a href="#isolation">Isolation</a></li>
        <li><a href="#loose-coupling">Loose Coupling</a></li>
        <li><a href="#maintenance-independence">Maintenance Independence</a></li>
        <li><a href="#less-overhead">Less Overhead</a></li>
        <li><a href="#transition-time">Transition Time</a></li>
        <li><a href="#transition-independence">Transition Independence</a></li>
        <li><a href="#portability">Portability</a></li>
        <li><a href="#reusability">Reusability</a></li>
        <li><a href="#rapidity">Rapidity</a></li>
        <li><a href="#version-control">Version Control</a></li>
        <li><a href="#container-home-bare-metal-or-virtual-machine">Container Home: Bare Metal or Virtual Machine</a></li>
        <li><a href="#container-images-and-container-registries">Container Images and Container Registries</a></li>
        <li><a href="#rootful-vs-rootless-containers">Rootful vs. Rootless Containers</a></li>
      </ul>
    </li>
    <li><a href="#working-with-images-and-containers">Working with Images and Containers</a>
      <ul>
        <li><a href="#lab-install-necessary-container-support">Lab: Install Necessary Container Support</a></li>
        <li><a href="#podman-command"><code>podman</code> Command</a></li>
        <li><a href="#subcommands">Subcommands</a>
          <ul>
            <li><a href="#image-management">Image Management</a></li>
            <li><a href="#container-management">Container Management</a></li>
          </ul>
        </li>
        <li><a href="#skopeo-command"><code>skopeo</code> Command</a></li>
        <li><a href="#viewing-podman-configuration-and-version">Viewing Podman Configuration and Version</a></li>
        <li><a href="#image-management-1">Image Management</a></li>
        <li><a href="#lab-search-examine-download-and-remove-an-image">Lab: Search, Examine, Download, and Remove an Image</a></li>
        <li><a href="#containerfile">Containerfile</a></li>
        <li><a href="#lab-use-containerfile-to-build-image">Lab: Use Containerfile to Build Image</a></li>
        <li><a href="#basic-container-management">Basic Container Management</a></li>
        <li><a href="#lab-run-interact-with-and-remove-a-named-container">Lab: Run, Interact with, and Remove a Named Container</a></li>
        <li><a href="#lab-run-a-nameless-container-and-auto-remove-it-after-entry-point-command-execution">Lab: Run a Nameless Container and Auto-Remove it After Entry Point Command Execution</a></li>
      </ul>
    </li>
    <li><a href="#advanced-container-management">Advanced Container Management</a></li>
    <li><a href="#containers-and-port-mapping">Containers and Port Mapping</a>
      <ul>
        <li><a href="#lab-configure-port-mapping">Lab: Configure Port Mapping</a></li>
        <li><a href="#exercise-22-7-stop-restart-and-remove-a-container">Exercise 22-7: Stop, Restart, and Remove a Container</a></li>
      </ul>
    </li>
    <li><a href="#containers-and-environment-variables">Containers and Environment Variables</a>
      <ul>
        <li><a href="#lab-pass-and-set-environment-variables">Lab: Pass and Set Environment Variables</a></li>
      </ul>
    </li>
    <li><a href="#containers-and-persistent-storage">Containers and Persistent Storage</a>
      <ul>
        <li><a href="#lab-attach-persistent-storage-and-access-data-across-containers">Lab: Attach Persistent Storage and Access Data Across Containers</a></li>
      </ul>
    </li>
    <li><a href="#container-state-management-with-systemd">Container State Management with systemd</a>
      <ul>
        <li><a href="#lab-configure-a-rootful-container-as-a-systemd-service">Lab: Configure a Rootful Container as a systemd Service</a></li>
        <li><a href="#lab-configure-rootless-container-as-a-systemd-service">Lab: Configure Rootless Container as a systemd Service</a></li>
      </ul>
    </li>
    <li><a href="#containers-diy-labs">Containers DIY Labs</a>
      <ul>
        <li><a href="#lab-launch-named-root-container-with-port-mapping">Lab: Launch Named Root Container with Port Mapping</a></li>
        <li><a href="#lab-launch-nameless-rootless-container-with-two-variables">Lab: Launch Nameless Rootless Container with Two Variables</a></li>
        <li><a href="#lab-launch-named-rootless-container-with-persistent-storage">Lab: Launch Named Rootless Container with Persistent Storage</a></li>
        <li><a href="#lab-launch-named-rootless-container-with-port-mapping-environment-variables-and-persistent-storage">Lab: Launch Named Rootless Container with Port Mapping, Environment Variables, and Persistent Storage</a></li>
        <li><a href="#lab-22-5-control-rootless-container-states-via-systemd">Lab 22-5: Control Rootless Container States via systemd</a></li>
        <li><a href="#lab-22-6-control-rootful-container-states-via-systemd">Lab 22-6: Control Rootful Container States via systemd</a></li>
        <li><a href="#lab-22-7-build-custom-image-using-containerfile">Lab 22-7: Build Custom Image Using Containerfile</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</details>


<script>
  (function () {
    'use strict'

    const SCROLL_OFFSET_RATIO = 0.33
    const TOC_SELECTOR = '#TableOfContents'
    const ANCHOR_SELECTOR = '.anchor'
    const TOC_LINK_SELECTOR = 'a[href^="#"]'
    const NESTED_LIST_SELECTOR = 'li ul'
    const ACTIVE_CLASS = 'active'
    let isJumpingToAnchor = false

    function getActiveAnchorId(anchors, offsetRatio) {
      const threshold = window.scrollY + window.innerHeight * offsetRatio
      const tocLinks = [...document.querySelectorAll('#TableOfContents a[href^="#"]')]
      const tocIds = new Set(tocLinks.map(link => link.getAttribute('href').substring(1)))

      if (isJumpingToAnchor) {
        for (let i = 0; i < anchors.length; i++) {
          const anchor = anchors[i]
          if (!tocIds.has(anchor.id)) continue
          const top = anchor.getBoundingClientRect().top + window.scrollY
          if (Math.abs(window.scrollY - top) < 100) {
            return anchor.id
          }
        }
      }

      for (let i = anchors.length - 1; i >= 0; i--) {
        const top = anchors[i].getBoundingClientRect().top + window.scrollY
        if (top <= threshold && tocIds.has(anchors[i].id)) {
          return anchors[i].id
        }
      }
      return anchors.find(anchor => tocIds.has(anchor.id))?.id || ''
    }

    function updateTOC({ toc, anchors, links, scrollOffset, collapseInactive }) {
      const activeId = getActiveAnchorId(anchors, scrollOffset)
      if (!activeId) return

      links.forEach(link => {
        const isActive = link.getAttribute('href') === `#${activeId}`
        link.classList.toggle(ACTIVE_CLASS, isActive)

        if (collapseInactive) {
          const ul = link.closest('li')?.querySelector('ul')
          if (ul) ul.style.display = isActive ? '' : 'none'
        }
      })

      if (collapseInactive) {
        const activeLink = toc.querySelector(`a[href="#${CSS.escape(activeId)}"]`)
        let el = activeLink
        while (el && el !== toc) {
          if (el.tagName === 'UL') el.style.display = ''
          if (el.tagName === 'LI') el.querySelector('ul')?.style.setProperty('display', '')
          el = el.parentElement
        }
      }
    }

    function initTOC() {
      const toc = document.querySelector(TOC_SELECTOR)
      if (!toc) return

      const collapseInactive = true
      const anchors = [...document.querySelectorAll(ANCHOR_SELECTOR)]
      const links = [...toc.querySelectorAll(TOC_LINK_SELECTOR)]

      if (collapseInactive) {
        toc.querySelectorAll(NESTED_LIST_SELECTOR).forEach(ul => ul.style.display = 'none')
      }

      links.forEach(link => {
        link.addEventListener('click', () => {
          isJumpingToAnchor = true
        })
      })

      const config = {
        toc,
        anchors,
        links,
        scrollOffset: SCROLL_OFFSET_RATIO,
        collapseInactive
      }

      window.addEventListener('scroll', () => updateTOC(config), { passive: true })
      window.addEventListener('hashchange', () => updateTOC(config), { passive: true })

      updateTOC(config)
    }

    document.readyState === 'loading'
      ? document.addEventListener('DOMContentLoaded', initTOC)
      : initTOC()
  })()
</script>


            
          </div>
        </div>
      


      <div class="min-w-0 min-h-0 max-w-fit">
        

        <div class="article-content max-w-prose mb-20">
          
<h1 class="relative group">Introduction to Containers
    <div id="introduction-to-containers" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#introduction-to-containers" aria-label="Anchor">#</a>
    </span>
    
</h1>
<ul>
<li>Take advantage of the native virtualization features available in the Linux kernel.</li>
<li>Each container typically encapsulates one self-contained application that includes all dependencies such as library files, configuration files, software binaries, and services.</li>
</ul>
<p>Traditional server/ application deployment:</p>
<ul>
<li>Applications may have conflicting requirements in terms of shared library files, package dependencies, and software versioning.</li>
<li>Patching or updating the operating system may result in breaking an application functionality.</li>
<li>Developers perform an analysis on their current deployments before they decide whether to collocate a new application with an existing one or to go with a new server without taking the risk of breaking the current operation.</li>
</ul>
<p>Container Model:</p>
<ul>
<li>
<p>Developers can now package their application alongside dependencies, shared library files, environment variables, and other specifics in a single image file and use that file to run the application in a unique, isolated &ldquo;environment&rdquo; called container.</p>
</li>
<li>
<p>A container is essentially a set of processes that runs in complete seclusion on a Linux system.</p>
</li>
<li>
<p>A single Linux system running on bare metal hardware or in a virtual machine may have tens or hundreds of containers running at a time.</p>
</li>
<li>
<p>The underlying hardware may be located either on the ground or in the cloud.</p>
</li>
<li>
<p>Each container is treated as a complete whole, which can be tagged, started, stopped, restarted, or even transported to another server without impacting other running containers.</p>
</li>
<li>
<p>Any conflicts that may exist among applications, within application components, or with the operating system can be evaded.</p>
</li>
<li>
<p>Applications encapsulated to run inside containers are called containerized applications.</p>
</li>
<li>
<p>Containerization is a growing trend for architecting and deploying applications, application components, and databases in real world environments.</p>
</li>
</ul>

<h3 class="relative group">Containers and the Linux Features
    <div id="containers-and-the-linux-features" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#containers-and-the-linux-features" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Container technology employs some of the core features available in the Linux kernel.</li>
<li>These features include:
<ul>
<li><strong>control groups</strong></li>
<li><strong>namespaces</strong></li>
<li><strong>seccomp</strong> (secure computing mode)</li>
<li><strong>SELinux</strong></li>
</ul>
</li>
</ul>
<p><strong>Control Groups</strong> (cgroups)</p>
<ul>
<li>Split processes into groups to set limits on their consumption of compute resources&mdash;CPU, memory, disk, and network I/O.</li>
<li>These restrictions result in controlling individual processes from over utilizing available resources.</li>
</ul>
<p><strong>Namespaces</strong></p>
<ul>
<li>Restrict the ability of process groups from seeing or accessing system resources&mdash;PIDs, network interfaces, mount points, hostname, etc.</li>
<li>Creates a layer of isolation between process groups and the rest of the system.</li>
<li>Guarantees a secure, performant, and stable environment for containerized applications as well as the host operating system.</li>
</ul>
<p><strong>Secure Computing Mode (seccomp) and SELinux</strong></p>
<ul>
<li>Impose security constraints thereby protecting processes from one another and the host operating system from running processes.</li>
<li>Container technology employs these characteristics to run processes isolated in a highly secure environment with full control over what they can or cannot do.</li>
</ul>

<h2 class="relative group">Benefits of Using Containers
    <div id="benefits-of-using-containers" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#benefits-of-using-containers" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">Isolation
    <div id="isolation" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#isolation" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Containers are not affected due to changes in the host operating system or in other hosted or containerized applications, as they run fully isolated from the rest of the environment.</li>
</ul>

<h3 class="relative group">Loose Coupling
    <div id="loose-coupling" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#loose-coupling" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Containerized applications are loosely coupled with the underlying operating system due to their self-containment and minimal level of dependency.</li>
</ul>

<h3 class="relative group">Maintenance Independence
    <div id="maintenance-independence" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#maintenance-independence" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Maintenance is performed independently on individual containers.</li>
</ul>

<h3 class="relative group">Less Overhead
    <div id="less-overhead" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#less-overhead" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Containers require fewer system resources than do bare metal and virtual servers.</li>
</ul>

<h3 class="relative group">Transition Time
    <div id="transition-time" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#transition-time" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Containers require a few seconds to start and stop.</li>
</ul>

<h3 class="relative group">Transition Independence
    <div id="transition-independence" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#transition-independence" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Transitioning from one state to another (start or stop) is independent of other containers, and it does not affect or require a restart of any underlying host operating system service.</li>
</ul>

<h3 class="relative group">Portability
    <div id="portability" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#portability" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Containers can be migrated to other servers without modifications to the contained applications.</li>
<li>Target servers may be bare metal or virtual and located on-premises or in the cloud.</li>
</ul>

<h3 class="relative group">Reusability
    <div id="reusability" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#reusability" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>The same container image can be used to run identical containers in development, test, preproduction, and production environments.</li>
<li>There is no need to rebuild the image.</li>
</ul>

<h3 class="relative group">Rapidity
    <div id="rapidity" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#rapidity" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>The container technology allows for accelerated application development, testing, deployment, patching, and scaling.</li>
<li>There is no need for an exhaustive testing.</li>
</ul>

<h3 class="relative group">Version Control
    <div id="version-control" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#version-control" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Container images can be version-controlled, which gives users the flexibility in choosing the right version to run a container.</li>
</ul>

<h3 class="relative group">Container Home: Bare Metal or Virtual Machine
    <div id="container-home-bare-metal-or-virtual-machine" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#container-home-bare-metal-or-virtual-machine" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>Containers</p>
<ul>
<li>run directly on the underlying operating system whether it be running on a bare metal server or in a virtual machine.</li>
<li>Share hardware and operating system resources securely among themselves.</li>
<li>Containerized applications stay lightweight and isolated, and run in parallel.</li>
<li>Share the same Linux kernel and require far fewer hardware resources than do virtual machines, which contributes to their speedy start and stop.</li>
<li>Given the presence of an extra layer of hypervisor services, it may be more beneficial and economical to run containers directly on non-virtualized physical servers.</li>
</ul>
<figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt=""
    src="../../../img/image-3RXCU9W7%201.jpg"
    ></figure>

<h3 class="relative group">Container Images and Container Registries
    <div id="container-images-and-container-registries" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#container-images-and-container-registries" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Launching a container requires a pre-packaged image to be available.</li>
</ul>
<p><strong>container image</strong></p>
<ul>
<li>
<p>Essentially a static file that is built with all necessary components (application binaries, library files, configuration settings, environment variables, static data files, etc.)</p>
</li>
<li>
<p>Required by an application to run smoothly, securely, and independently.</p>
</li>
<li>
<p>RHEL follows the <strong>open container initiative</strong> (<strong>OCI</strong>) to allow users to build images based on industry standard specifications that define the image format, host operating system metadata, and supported hardware architectures.</p>
</li>
<li>
<p>An OCI-compliant image can be executed and managed with OCI-compliant tools such as podman (pod manager) and Docker.</p>
</li>
<li>
<p>Images can be version-controlled giving users the suppleness to use the latest or any of the previous versions to launch their containers.</p>
</li>
<li>
<p>A single image can be used to run several containers at once.</p>
</li>
<li>
<p>Container images adhere to a standard naming convention for identification.</p>
</li>
<li>
<p>This is referred to as <strong>fully qualified image name</strong> (<strong>FQIN</strong>).</p>
<ul>
<li>Comprised of four components:
<ul>
<li>(1) the storage location (registry_name)</li>
<li>(2) the owner or organization name (user_name)</li>
<li>(3) a unique repository name (repo_name)</li>
<li>(4) an optional version (tag).</li>
</ul>
</li>
<li>The syntax of an FQIN is:
<em>registry_hostname/user_name/repo_name:tag</em>.</li>
</ul>
</li>
<li>
<p>Images are stored and maintained in public or private registries;</p>
</li>
<li>
<p>They need to be downloaded and made locally available for consumption.</p>
</li>
<li>
<p>There are several registries available on the Internet.</p>
<ul>
<li><em>registry.redhat.io</em> (/images/images based on official Red Hat products; requires authentication),</li>
<li><em>registry.access.redhat.com</em> (requires no authentication)</li>
<li><em>registry.connect.redhat.com</em> (/images/images based on third-party products)</li>
<li><em>hub.docker.com</em> (Docker Hub).</li>
</ul>
</li>
<li>
<p>The three Red Hat registries may be searched using the Red Hat Container Catalog at catalog.redhat.com/software/containers/search.</p>
</li>
<li>
<p>Additional registries may be added as required.</p>
</li>
<li>
<p>Private registries may also require authentication for access.</p>
</li>
</ul>

<h3 class="relative group">Rootful vs. Rootless Containers
    <div id="rootful-vs-rootless-containers" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#rootful-vs-rootless-containers" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>
<p>Containers can be launched with the root user privileges (sudo or directly as the root user).</p>
</li>
<li>
<p>This gives containers full access to perform administrative functions including the ability to map privileged network ports (1024 and below).</p>
</li>
<li>
<p>Launching containers with superuser rights opens a gate to potential unauthorized access to the container host if a container is compromised due to a vulnerability or misconfiguration.</p>
</li>
<li>
<p>To secure containers and the underlying operating system, containers should be launched and interacted with as normal Linux users.</p>
</li>
<li>
<p>Such containers are referred to as <strong>rootless containers</strong>.</p>
</li>
<li>
<p>Rootless containers allow regular, unprivileged users to run containers without the ability to perform tasks that require privileged access.</p>
</li>
</ul>

<h2 class="relative group">Working with Images and Containers
    <div id="working-with-images-and-containers" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#working-with-images-and-containers" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">Lab: Install Necessary Container Support
    <div id="lab-install-necessary-container-support" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#lab-install-necessary-container-support" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Install the necessary software to set the foundation for completing the exercises in the remainder of the chapter.</li>
<li>The standard RHEL 9.1 image includes a package called <code>container-tools</code> that consists of all the required components and commands.</li>
<li>Use the standard <code>dnf</code> command to install the package.</li>
</ul>
<p>1. Install the container-tools package:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> root@server10 ~<span class="o">]</span><span class="c1"># dnf install -y container-tools</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> Upgraded:
</span></span><span class="line"><span class="cl">  aardvark-dns-2:1.10.0-3.el9_4.x86_64 
</span></span><span class="line"><span class="cl">  buildah-2:1.33.7-3.el9_4.x86_64         
</span></span><span class="line"><span class="cl">  netavark-2:1.10.3-1.el9.x86_64            
</span></span><span class="line"><span class="cl">  podman-4:4.9.4-6.el9_4.x86_64                                   
</span></span><span class="line"><span class="cl"> Installed:
</span></span><span class="line"><span class="cl">  container-tools-1-14.el9.noarch        
</span></span><span class="line"><span class="cl">  podman-docker-4:4.9.4-6.el9_4.noarch 
</span></span><span class="line"><span class="cl">  podman-remote-4:4.9.4-6.el9_4.x86_64    
</span></span><span class="line"><span class="cl">  python3-podman-3:4.9.0-1.el9.noarch 
</span></span><span class="line"><span class="cl">  python3-pyxdg-0.27-3.el9.noarch    
</span></span><span class="line"><span class="cl">  python3-tomli-2.0.1-5.el9.noarch   
</span></span><span class="line"><span class="cl">  skopeo-2:1.14.3-3.el9_4.x86_64             
</span></span><span class="line"><span class="cl">  toolbox-0.0.99.5-2.el9.x86_64      
</span></span><span class="line"><span class="cl">  udica-0.2.8-1.el9.noarch    
</span></span></code></pre></div><p>2. Verify the package installation:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@server10 ~<span class="o">]</span><span class="c1"># dnf list container-tools</span>
</span></span><span class="line"><span class="cl"> Updating Subscription Management repositories.
</span></span><span class="line"><span class="cl"> Last metadata expiration check: 14:53:32 ago on Wed <span class="m">31</span> Jul <span class="m">2024</span> 05:45:56 PM MST.
</span></span><span class="line"><span class="cl"> Installed Packages
</span></span><span class="line"><span class="cl"> container-tools.noarch   1-14.el9    @rhel-9-for-x86_64-appstream-rpms
</span></span></code></pre></div>
<h3 class="relative group"><code>podman</code> Command
    <div id="podman-command" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#podman-command" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Finding, inspect, retrieve, and delete images</li>
<li>Run, stop, list, and delete containers.</li>
<li>Used for most of these operations.</li>
</ul>

<h3 class="relative group">Subcommands
    <div id="subcommands" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#subcommands" aria-label="Anchor">#</a>
    </span>
    
</h3>

<h4 class="relative group">Image Management
    <div id="image-management" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#image-management" aria-label="Anchor">#</a>
    </span>
    
</h4>
<p><strong>build</strong></p>
<ul>
<li>Builds an image using instructions delineated in a Container file</li>
</ul>
<p><strong>images</strong></p>
<ul>
<li>Lists downloaded images from local storage</li>
</ul>
<p><strong>inspect</strong></p>
<ul>
<li>Examines an image and displays its details</li>
</ul>
<p><strong>login/logout</strong></p>
<ul>
<li>Logs in/out to/from a container registry. A login may be required to access private and protected registries.</li>
</ul>
<p><strong>pull</strong></p>
<ul>
<li>Downloads an image to local storage from a registry</li>
</ul>
<p><strong>rmi</strong></p>
<ul>
<li>Removes an image from local storage</li>
</ul>
<p><strong>search</strong></p>
<ul>
<li>Searches for an image. The following options can be included with this subcommand:</li>
</ul>
<ol>
<li>A <em>partial image name</em> in the search will produce a list of all images containing the partial name.</li>
<li>The <code>--no-trunc</code> option makes the command exhibit output without truncating it.</li>
<li>The <code>--limit &lt;number&gt;</code> option limits the displayed results to the specified number.</li>
</ol>
<p><strong>tag</strong></p>
<ul>
<li>Adds a name to an image. The default is &rsquo;latest&rsquo; to classify the image as the latest version. Older images may have specific version identifiers.</li>
</ul>

<h4 class="relative group">Container Management
    <div id="container-management" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#container-management" aria-label="Anchor">#</a>
    </span>
    
</h4>
<p><strong>attach</strong></p>
<ul>
<li>Attaches to a running container</li>
</ul>
<p><strong>exec</strong></p>
<ul>
<li>Runs a process in a running container</li>
</ul>
<p><strong>generate</strong></p>
<ul>
<li>Generates a systemd unit configuration file that can be used to control the operational state of a container. The <code>--new</code> option is important and is employed in later exercises.</li>
</ul>
<p><strong>info</strong></p>
<ul>
<li>Reveals system information, including the defined registries</li>
</ul>
<p><strong>inspect</strong></p>
<ul>
<li>Exhibits the configuration of a container</li>
</ul>
<p><strong>ps</strong></p>
<ul>
<li>Lists running containers (includes stopped containers with the -a option)</li>
</ul>
<p><strong>rm</strong></p>
<ul>
<li>Removes a container</li>
</ul>
<p><strong>run</strong></p>
<ul>
<li>Launches a new container from an image. Some options such as -d (detached), -i (interactive), and -t (terminal) are important and are employed in exercises where needed.</li>
</ul>
<p><strong>start/stop/restart</strong></p>
<ul>
<li>Starts, stops, or restarts a container</li>
</ul>

<h3 class="relative group"><code>skopeo</code> Command
    <div id="skopeo-command" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#skopeo-command" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Utilized for interacting with local and remote images and registries.</li>
<li>Has numerous subcommands available; however, you will be using only the <code>inspect</code> subcommand to examine the details of an image stored in a remote registry.</li>
</ul>
<p><em>/etc/containers/registries.conf</em></p>
<ul>
<li>System-wide configuration file for image registries.</li>
<li>Normal Linux users may store a customized copy of this file, if required, under the <em>~/.config/containers</em> directory.</li>
<li>Settings stored in the per-user file will take precedence over those stored in the system-wide file.
<ul>
<li>Useful for running rootless containers.</li>
</ul>
</li>
<li>Defines searchable and blocked registries.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@server10 ~<span class="o">]</span><span class="c1"># grep -Ev &#39;^#|^$&#39; /etc/containers/registries.conf</span>
</span></span><span class="line"><span class="cl"> unqualified-search-registries <span class="o">=</span> <span class="o">[</span><span class="s2">&#34;registry.access.redhat.com&#34;</span>, <span class="s2">&#34;registry.redhat.io&#34;</span>, <span class="s2">&#34;docker.io&#34;</span><span class="o">]</span>
</span></span><span class="line"><span class="cl"> short-name-mode <span class="o">=</span> <span class="s2">&#34;enforcing&#34;</span>
</span></span></code></pre></div><ul>
<li>The output shows three registries.</li>
<li>The <code>podman</code> command searches these registries for container images in the given order.</li>
<li>Can add additional registries to the list.</li>
</ul>
<p>Add a private registry called <em>registry.private.myorg.io</em> to be added with the highest priority:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@server10 ~<span class="o">]</span><span class="c1"># vim /etc/containers/registries.conf</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> unqualified-search-registries <span class="o">=</span> <span class="se">\[</span><span class="s2">&#34;registry.private.myorg.io&#34;</span>,
</span></span><span class="line"><span class="cl"> <span class="s2">&#34;registry.access.redhat.com&#34;</span>, <span class="s2">&#34;registry.redhat.io&#34;</span>, <span class="s2">&#34;docker.io&#34;</span><span class="se">\]</span>
</span></span></code></pre></div><p>If this private registry is the only one to be used, you can take the rest of the registry entries out of the list:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> unqualified-search-registries <span class="o">=</span> <span class="se">\[</span><span class="s2">&#34;registry.private.myorg.io&#34;</span><span class="se">\]</span>
</span></span></code></pre></div><p>EXAM TIP: As there is no Internet access provided during Red Hat exams, you may have to access a network-based registry to download images.</p>

<h3 class="relative group">Viewing Podman Configuration and Version
    <div id="viewing-podman-configuration-and-version" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#viewing-podman-configuration-and-version" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>The podman command references various system runtime and configuration files and runs certain Linux commands in the background to gather and display information.</li>
<li>For instance, it looks for registries and storage data in the system-wide and per-user configuration files, pulls memory information from the <em>/proc/meminfo</em> file, executes <code>uname -r</code>to obtain the kernel version, and so on.</li>
<li>podman&rsquo;s <code>info</code> subcommand shows all this information.</li>
</ul>
<p>Here is a sample when this command is executed as a normal
user (user1):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[[</span>user1@server10 root<span class="o">]</span>$ podman info
</span></span><span class="line"><span class="cl"> ERRO<span class="o">[</span>0000<span class="o">]</span> XDG_RUNTIME_DIR directory <span class="s2">&#34;/run/user/0&#34;</span> is not owned by the current user<span class="o">](</span>&lt;<span class="o">[</span>user1@server10 ~<span class="o">]</span>$ podman info
</span></span><span class="line"><span class="cl"> host:
</span></span><span class="line"><span class="cl">  arch: amd64
</span></span><span class="line"><span class="cl">  buildahVersion: 1.33.8
</span></span><span class="line"><span class="cl">  cgroupControllers:
</span></span><span class="line"><span class="cl">  - memory
</span></span><span class="line"><span class="cl">  - pids
</span></span><span class="line"><span class="cl">  cgroupManager: systemd
</span></span><span class="line"><span class="cl">  cgroupVersion: v2
</span></span><span class="line"><span class="cl">  conmon:
</span></span><span class="line"><span class="cl"> ...
</span></span></code></pre></div><ul>
<li>
<p>Re-run the command as root (preceded by sudo if running as user1) and compare the values for the settings &ldquo;rootless&rdquo; under host and &ldquo;ConfigFile&rdquo; and &ldquo;ImageStore&rdquo; under store.</p>
</li>
<li>
<p>The differences lie between where the root and rootless (normal) users store and obtain configuration data, the number of container images they have locally available, and so on.</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@server10 ~<span class="o">]</span><span class="c1"># podman info</span>
</span></span><span class="line"><span class="cl"> host:
</span></span><span class="line"><span class="cl">  arch: amd64
</span></span><span class="line"><span class="cl">  buildahVersion: 1.33.8
</span></span><span class="line"><span class="cl">  cgroupControllers:
</span></span><span class="line"><span class="cl">  - cpuset
</span></span><span class="line"><span class="cl">  - cpu
</span></span><span class="line"><span class="cl">  - io
</span></span><span class="line"><span class="cl">  - memory
</span></span><span class="line"><span class="cl">  - hugetlb
</span></span><span class="line"><span class="cl">  - pids
</span></span><span class="line"><span class="cl">  - rdma
</span></span><span class="line"><span class="cl">  - misc
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></div><p>Similarly, you can run the podman command as follows to check its
version:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@server10 ~<span class="o">]</span><span class="c1"># podman version</span>
</span></span><span class="line"><span class="cl"> Client:       Podman Engine
</span></span><span class="line"><span class="cl"> Version:      4.9.4-rhel
</span></span><span class="line"><span class="cl"> API Version:  4.9.4-rhel
</span></span><span class="line"><span class="cl"> Go Version:   go1.21.11 <span class="o">(</span>Red Hat 1.21.11-1.el9_4<span class="o">)</span>
</span></span><span class="line"><span class="cl"> Built:        Mon Jul  <span class="m">1</span> 03:27:14 <span class="m">2024</span>
</span></span><span class="line"><span class="cl"> OS/Arch:      linux/amd64
</span></span></code></pre></div>
<h3 class="relative group">Image Management
    <div id="image-management-1" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#image-management-1" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>Container images</p>
<ul>
<li>Are available from numerous private and public registries.</li>
<li>They are pre-built for a variety of use cases.</li>
<li>You can search through registries to find the one that suits your needs.</li>
<li>You can examine their metadata before downloading them for consumption.</li>
<li>Downloaded images can be removed when no longer needed to conserve local storage.</li>
<li>The same pair of commands&mdash;<code>podman</code> and <code>skopeo</code>&mdash;is employed for these operations.</li>
</ul>

<h3 class="relative group">Lab: Search, Examine, Download, and Remove an Image
    <div id="lab-search-examine-download-and-remove-an-image" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#lab-search-examine-download-and-remove-an-image" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Log in to the registry.access.redhat.com registry</li>
<li>Look for an image called <em>mysql-80</em> in the registry, examine its details, pull it to your system, confirm the retrieval, and finally erase it from the local storage.</li>
</ul>
<p>1. Log in to the specified Red Hat registry:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server10 ~<span class="o">]</span>$ podman login registry.redhat.io
</span></span></code></pre></div><p>2. Confirm a successful login:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server10 ~<span class="o">]</span>$ podman login registry.redhat.io --get-login
</span></span></code></pre></div><p>3. Find the mysql-80 image in the specified registry. Add the
<code>--no-trunc</code> option to view full output.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server10 ~<span class="o">]</span>$ podman search registry.redhat.io/mysql-80 --no-trunc
</span></span><span class="line"><span class="cl"> NAME                                     DESCRIPTION
</span></span><span class="line"><span class="cl"> registry.redhat.io/rhel8/mysql-80        This container image provides a containerized packaging of the MySQL mysqld daemon and client application. The  mysqld server daemon accepts connections from clients and provides access to content from MySQL databases on behalf of the clients.
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></div><p>4. Select the second image rhel9/mysql-80 for this exercise. Inspect the image without downloading it using skopeo inspect. A long output
will be generated. The command uses the docker:// mechanism to access
the image.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server10 ~<span class="o">]</span>$ skopeo inspect docker://registry.redhat.io/rhel9/mysql-80
</span></span><span class="line"><span class="cl"> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;Name&#34;</span>: <span class="s2">&#34;registry.redhat.io/rhel9/mysql-80&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;Digest&#34;</span>: <span class="s2">&#34;sha256:247903d2103a3c1db9401f6340ecdcd97c6244480b7a3419e6303dda650491dc&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;RepoTags&#34;</span>: <span class="o">[</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;1&#34;</span>,
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;1-190&#34;</span>,
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;1-190.1655192188&#34;</span>,
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;1-190.1655192188-source&#34;</span>,
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;1-190-source&#34;</span>,
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;1-197&#34;</span>,
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;1-197-source&#34;</span>,
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;1-206&#34;</span>,
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></div><p>Output:</p>
<ul>
<li>
<p>Shows older versions under RepoTags</p>
</li>
<li>
<p>Creation time for the latest version</p>
</li>
<li>
<p>Build date of the image</p>
</li>
<li>
<p>description</p>
</li>
<li>
<p>other information.</p>
</li>
<li>
<p>It is a good practice to analyze the metadata of an image prior to downloading and consuming it.</p>
</li>
</ul>
<p>5. Download the image by specifying the fully qualified image name using podman pull:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server10 ~<span class="o">]</span>$ podman pull docker://registry.redhat.io/rhel9/mysql-80
</span></span><span class="line"><span class="cl"> Trying to pull registry.redhat.io/rhel9/mysql-80:latest...
</span></span><span class="line"><span class="cl"> Getting image <span class="nb">source</span> signatures
</span></span><span class="line"><span class="cl"> Checking <span class="k">if</span> image destination supports signatures
</span></span><span class="line"><span class="cl"> Copying blob 846c0bdf4e30 <span class="k">done</span>   <span class="p">|</span> 
</span></span><span class="line"><span class="cl"> Copying blob cc296d75b612 <span class="k">done</span>   <span class="p">|</span> 
</span></span><span class="line"><span class="cl"> Copying blob db22e630b1c7 <span class="k">done</span>   <span class="p">|</span> 
</span></span><span class="line"><span class="cl"> Copying config b5782120a3 <span class="k">done</span>   <span class="p">|</span> 
</span></span><span class="line"><span class="cl"> Writing manifest to image destination
</span></span><span class="line"><span class="cl"> Storing signatures
</span></span><span class="line"><span class="cl"> b5782120a320e5915d86555e661c357cfa56dd8320ba4c54a58caa1e1c91925f
</span></span></code></pre></div><p>6. List the image to confirm the retrieval using podman images:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server10 ~<span class="o">]</span>$ podman images
</span></span><span class="line"><span class="cl"> REPOSITORY                         TAG         IMAGE ID      CREATED      SIZE
</span></span><span class="line"><span class="cl"> registry.redhat.io/rhel9/mysql-80  latest      b5782120a320  <span class="m">2</span> weeks ago  <span class="m">555</span> MB
</span></span></code></pre></div><p>7. Display the image&rsquo;s details using <code>podman inspect</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server10 ~<span class="o">]</span>$ podman inspect mysql-80
</span></span><span class="line"><span class="cl"> <span class="o">[</span>
</span></span><span class="line"><span class="cl">     <span class="o">{</span>
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;Id&#34;</span>: <span class="s2">&#34;b5782120a320e5915d86555e661c357cfa56dd8320ba4c54a58caa1e1c91925f&#34;</span>,
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;Digest&#34;</span>: <span class="s2">&#34;sha256:247903d2103a3c1db9401f6340ecdcd97c6244480b7a3419e6303dda650491dc&#34;</span>,
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;RepoTags&#34;</span>: <span class="o">[</span>
</span></span><span class="line"><span class="cl">               <span class="s2">&#34;registry.redhat.io/rhel9/mysql-80:latest&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="o">]</span>,
</span></span></code></pre></div><p>8. Remove the mysql-80 image from local storage:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server10 ~<span class="o">]</span>$ podman rmi mysql-80
</span></span><span class="line"><span class="cl"> Untagged: registry.redhat.io/rhel9/mysql-80:latest
</span></span><span class="line"><span class="cl"> Deleted: b5782120a320e5915d86555e661c357cfa56dd8320ba4c54a58caa1e1c91925f
</span></span></code></pre></div><ul>
<li>Shows the ID of the image after deletion.</li>
</ul>
<p>9. Confirm the removal:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server10 ~<span class="o">]</span>$ podman images
</span></span><span class="line"><span class="cl"> REPOSITORY  TAG         IMAGE ID    CREATED     SIZE
</span></span></code></pre></div>
<h3 class="relative group">Containerfile
    <div id="containerfile" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#containerfile" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Can build a custom image by outlining the steps you need to be run in a file called Containerfile.</li>
<li>The podman command can then be used to read those instructions and executes them to produce a new image.</li>
<li>File name <em>containerfile</em> is widespread; but you can use any name of your liking.</li>
</ul>
<p>Instructions that may be utilized inside a Containerfile to perform specific functions during the build process:</p>
<p><strong>CMD</strong></p>
<ul>
<li>Runs a command</li>
</ul>
<p><strong>COPY</strong></p>
<ul>
<li>Copies files to the specified location</li>
</ul>
<p><strong>ENV</strong></p>
<ul>
<li>Defines environment variables to be used during the build process</li>
</ul>
<p><strong>EXPOSE</strong></p>
<ul>
<li>A port number that will be opened when a container is launched using this image</li>
</ul>
<p><strong>FROM</strong></p>
<ul>
<li>Identifies the base container image to use</li>
</ul>
<p><strong>RUN</strong></p>
<ul>
<li>Executes the specified commands</li>
</ul>
<p><strong>USER</strong></p>
<ul>
<li>Defines a non-root user to run the commands as</li>
</ul>
<p><strong>WORKDIR</strong></p>
<ul>
<li>Sets the working directory. This directory is automatically created if it does not already exist.</li>
</ul>
<p>A sample container file is presented below:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server10 ~<span class="o">]</span>$ vim containerfile
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="c1"># Use RHEL9 base image</span>
</span></span><span class="line"><span class="cl"> FROM registry.redhat.io/ubi9/ubi
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="c1"># Install Apache web server software</span>
</span></span><span class="line"><span class="cl"> RUN dnf -y install httpd
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="c1"># Copy the website</span>
</span></span><span class="line"><span class="cl"> COPY ./index.html /var/www/html/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="c1"># Expose Port 80/tcp</span>
</span></span><span class="line"><span class="cl"> EXPOSE <span class="m">80</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="c1"># Start Apache web server</span>
</span></span><span class="line"><span class="cl"> CMD <span class="o">[</span><span class="s2">&#34;httpd&#34;</span><span class="o">]</span>
</span></span></code></pre></div><ul>
<li>The index.html file may contain a basic statement such as &ldquo;This is a custom-built Apache web server container image based on RHEL 9&rdquo;.</li>
</ul>

<h3 class="relative group">Lab: Use Containerfile to Build Image
    <div id="lab-use-containerfile-to-build-image" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#lab-use-containerfile-to-build-image" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Use a containerfile to build a custom image based on the latest version of the RHEL 9 universal base image (ubi) available from a Red Hat container registry.</li>
<li>Confirm the image creation.</li>
<li>Use the podman command for these activities.</li>
</ul>
<p>1. Log in to the specified Red Hat registry:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server10 ~<span class="o">]</span>$ podman login registry.redhat.io
</span></span><span class="line"><span class="cl"> Authenticating with existing credentials <span class="k">for</span> registry.redhat.io
</span></span><span class="line"><span class="cl"> Existing credentials are valid. Already logged in to registry.redhat.io
</span></span></code></pre></div><p>2. Confirm a successful login:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server10 ~<span class="o">]</span>$ podman login registry.redhat.io --get-login
</span></span></code></pre></div><p>3. Create a file called containerfile with the following code:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server10 ~<span class="o">]</span>$ vim containerfile2
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="c1"># Use RHEL9 base image</span>
</span></span><span class="line"><span class="cl"> FROM registry.redhat.io/ubi9/ubi
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="c1"># Count the number of characters</span>
</span></span><span class="line"><span class="cl"> CMD <span class="nb">echo</span> <span class="s2">&#34;RHCSA exam is hands-on.&#34;</span> <span class="p">|</span> wc
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="c1"># Copy a local file to /tmp</span>
</span></span><span class="line"><span class="cl"> COPY ./testfile /tmp
</span></span></code></pre></div><p>4. Create a file called testfile with some random text in it and place it in the same directory as the containerfile.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server10 ~<span class="o">]</span>$ <span class="nb">echo</span> <span class="s2">&#34;boo bee doo bee doo&#34;</span> &gt;&gt; testfile
</span></span><span class="line"><span class="cl"> <span class="o">[</span>user1@server10 ~<span class="o">]</span>$ cat testfile 
</span></span><span class="line"><span class="cl"> boo bee doo bee doo
</span></span></code></pre></div><p>5. Build an image by specifying the containerfile name and an image tag such as <code>ubi9-simple-image</code>. The period character at the end represents the current directory and this is where both containerfile and testfile are located.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server10 ~<span class="o">]</span>$ podman image build -f containerfile2 -t ubi9-simple-image .
</span></span><span class="line"><span class="cl"> STEP 1/3: FROM registry.redhat.io/ubi9/ubi
</span></span><span class="line"><span class="cl"> Trying to pull registry.redhat.io/ubi9/ubi:latest...
</span></span><span class="line"><span class="cl"> Getting image <span class="nb">source</span> signatures
</span></span><span class="line"><span class="cl"> Checking <span class="k">if</span> image destination supports signatures
</span></span><span class="line"><span class="cl"> Copying blob cc296d75b612 <span class="k">done</span>   <span class="p">|</span> 
</span></span><span class="line"><span class="cl"> Copying config 159a1e6731 <span class="k">done</span>   <span class="p">|</span> 
</span></span><span class="line"><span class="cl"> Writing manifest to image destination
</span></span><span class="line"><span class="cl"> Storing signatures
</span></span><span class="line"><span class="cl"> STEP 2/3: CMD <span class="nb">echo</span> <span class="s2">&#34;RHCSA exam is hands-on.&#34;</span> <span class="p">|</span> wc
</span></span><span class="line"><span class="cl"> --&gt; 4c005bfd0b34
</span></span><span class="line"><span class="cl"> STEP 3/3: COPY ./testfile /tmp
</span></span><span class="line"><span class="cl"> COMMIT ubi9-simple-image
</span></span><span class="line"><span class="cl"> --&gt; a2797b06a129
</span></span><span class="line"><span class="cl"> Successfully tagged localhost/ubi9-simple-image:latest
</span></span><span class="line"><span class="cl"> a2797b06a1294ed06edab2ba1c21d2bddde3eb3af1d8ed286781837f62992622
</span></span></code></pre></div><p>6. Confirm image creation:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server10 ~<span class="o">]</span>$ podman image ls
</span></span><span class="line"><span class="cl"> REPOSITORY                   TAG         IMAGE ID      CREATED        SIZE
</span></span><span class="line"><span class="cl"> localhost/ubi9-simple-image  latest      a2797b06a129  <span class="m">2</span> minutes ago  <span class="m">220</span> MB
</span></span><span class="line"><span class="cl"> registry.redhat.io/ubi9/ubi  latest      159a1e67312e  <span class="m">2</span> weeks ago    <span class="m">220</span> MB
</span></span></code></pre></div><p>Output:</p>
<ul>
<li>
<p>downloaded image</p>
</li>
<li>
<p>new custom image along with their image IDs, creation time, and size.</p>
</li>
<li>
<p>Do not remove the custom image yet as you will be using it to launch a container in the next section.</p>
</li>
</ul>

<h3 class="relative group">Basic Container Management
    <div id="basic-container-management" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#basic-container-management" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Starting, stopping, listing, viewing information about, and deleting them.</li>
<li>Depending on the use case, containers can be launched in different ways.</li>
<li>They can:
<ul>
<li>Have a name assigned or be nameless</li>
<li>Have a terminal session opened for interaction</li>
<li>Execute an entry point command (the command specified at the launch time) and be auto-terminated right after.</li>
<li>etc.</li>
</ul>
</li>
<li>Running containers can be stopped and restarted, or discarded if no longer needed.</li>
<li>The podman command is utilized to start containers and manage their lifecycle.</li>
<li>This command is also employed to list stopped and running containers, and view their details.</li>
</ul>

<h3 class="relative group">Lab: Run, Interact with, and Remove a Named Container
    <div id="lab-run-interact-with-and-remove-a-named-container" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#lab-run-interact-with-and-remove-a-named-container" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Run a container based on the latest version of the RHEL 8 ubi available in the Red Hat container registry.</li>
<li>Assign this container a name and run a few native Linux commands in a terminal window interactively.</li>
<li>Exit out of the container to mark the completion of the exercise.</li>
</ul>
<p>1. Launch a container using ubi8 (RHEL 8). Name this container rhel8-base-os and open a terminal session for interaction:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server10 ~<span class="o">]</span>$ podman run -ti --name rhel8-base-os ubi8
</span></span><span class="line"><span class="cl"> Resolved <span class="s2">&#34;ubi8&#34;</span> as an <span class="nb">alias</span> <span class="o">(</span>/etc/containers/registries.conf.d/001-rhel-shortnames.conf<span class="o">)</span>
</span></span><span class="line"><span class="cl"> Trying to pull registry.access.redhat.com/ubi8:latest...
</span></span><span class="line"><span class="cl"> Getting image <span class="nb">source</span> signatures
</span></span><span class="line"><span class="cl"> Checking <span class="k">if</span> image destination supports signatures
</span></span><span class="line"><span class="cl"> Copying blob 8694db102e5b <span class="k">done</span>   <span class="p">|</span> 
</span></span><span class="line"><span class="cl"> Copying config 269749ad51 <span class="k">done</span>   <span class="p">|</span> 
</span></span><span class="line"><span class="cl"> Writing manifest to image destination
</span></span><span class="line"><span class="cl"> Storing signatures
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@30c7cccd8490 /<span class="o">]</span><span class="c1"># </span>
</span></span></code></pre></div><ul>
<li>
<p>Downloaded the latest version of the specified image automatically even though no FQIN was provided.</p>
<ul>
<li>This is because it searched through the registries listed in the <em>/etc/containers/registries.conf</em> file and retrieved the image from wherever it found it first (registry.access.redhat.com).</li>
</ul>
</li>
<li>
<p>Opened a terminal session inside the container as the root user to interact with the containerized RHEL 8 OS.</p>
</li>
<li>
<p>The container ID is reflected as the hostname in the container&rsquo;s command prompt (last line in the output). This is an auto-generated ID.</p>
</li>
<li>
<p>If you encounter any permission issues, delete the /etc/docker directory (if it exists) and try again.</p>
</li>
</ul>
<p>2. Run a few basic commands such as pwd, ls, cat, and date inside the
container for verification:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@30c7cccd8490 /<span class="o">]</span><span class="c1"># pwd</span>
</span></span><span class="line"><span class="cl"> /
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@30c7cccd8490 /<span class="o">]</span><span class="c1"># ls</span>
</span></span><span class="line"><span class="cl"> bin   dev  home  lib64	     media  opt   root	sbin  sys  usr
</span></span><span class="line"><span class="cl"> boot  etc  lib	 lost+found  mnt    proc  run	srv   tmp  var
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@30c7cccd8490 /<span class="o">]</span><span class="c1"># cat /etc/redhat-release</span>
</span></span><span class="line"><span class="cl"> Red Hat Enterprise Linux release 8.10 <span class="o">(</span>Ootpa<span class="o">)</span>
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@30c7cccd8490 /<span class="o">]</span><span class="c1"># date</span>
</span></span><span class="line"><span class="cl"> Thu Aug  <span class="m">1</span> 21:09:13 UTC <span class="m">2024</span>
</span></span></code></pre></div><p>3. Close the terminal session when done:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@30c7cccd8490 /<span class="o">]</span><span class="c1"># exit</span>
</span></span><span class="line"><span class="cl"> <span class="nb">exit</span>
</span></span><span class="line"><span class="cl"> <span class="o">[</span>user1@server10 ~<span class="o">]</span>$ 
</span></span></code></pre></div><p>4. Delete the container using podman rm:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server10 ~<span class="o">]</span>$ podman rm rhel8-base-os
</span></span><span class="line"><span class="cl"> rhel8-base-os
</span></span></code></pre></div><p>Confirm the removal with podman ps.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server10 ~<span class="o">]</span>$ podman ps
</span></span><span class="line"><span class="cl"> CONTAINER ID  IMAGE       COMMAND     CREATED     STATUS      PORTS       NAMES
</span></span></code></pre></div>
<h3 class="relative group">Lab: Run a Nameless Container and Auto-Remove it After Entry Point Command Execution
    <div id="lab-run-a-nameless-container-and-auto-remove-it-after-entry-point-command-execution" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#lab-run-a-nameless-container-and-auto-remove-it-after-entry-point-command-execution" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Launch a container based on the latest version of RHEL 7 ubi available in a Red Hat container registry.
<ul>
<li>This image provides the base operating system layer to deploy containerized applications.</li>
</ul>
</li>
<li>Enter a Linux command at the command line for execution inside the container as an entry point command and the container should be automatically deleted right after that.</li>
</ul>
<p>1. Start a container using ubi7 (RHEL 7) and run ls as an entry point command. Remove the container as soon as the entry point command has finished running.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server10 ~<span class="o">]</span>$ podman run --rm ubi7 ls
</span></span><span class="line"><span class="cl"> Resolved <span class="s2">&#34;ubi7&#34;</span> as an <span class="nb">alias</span> <span class="o">(</span>/etc/containers/registries.conf.d/001-rhel-shortnames.conf<span class="o">)</span>
</span></span><span class="line"><span class="cl"> Trying to pull registry.access.redhat.com/ubi7:latest...
</span></span><span class="line"><span class="cl"> Getting image <span class="nb">source</span> signatures
</span></span><span class="line"><span class="cl"> Checking <span class="k">if</span> image destination supports signatures
</span></span><span class="line"><span class="cl"> Copying blob 7f2c2c4492b6 <span class="k">done</span>   <span class="p">|</span> 
</span></span><span class="line"><span class="cl"> Copying config a084eb42a5 <span class="k">done</span>   <span class="p">|</span> 
</span></span><span class="line"><span class="cl"> Writing manifest to image destination
</span></span><span class="line"><span class="cl"> Storing signatures
</span></span><span class="line"><span class="cl"> bin
</span></span><span class="line"><span class="cl"> boot
</span></span><span class="line"><span class="cl"> dev
</span></span><span class="line"><span class="cl"> etc
</span></span><span class="line"><span class="cl"> home
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></div><p>2. Confirm the container removal with podman ps:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">podman ps
</span></span><span class="line"><span class="cl"> CONTAINER ID  IMAGE       COMMAND     CREATED     STATUS      PORTS       NAMES
</span></span></code></pre></div>
<h2 class="relative group">Advanced Container Management
    <div id="advanced-container-management" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#advanced-container-management" aria-label="Anchor">#</a>
    </span>
    
</h2>
<ul>
<li>Preset environment variables may be passed when launching containers or new variables may be set for containerized applications to consume for proper operation.</li>
<li>Information stored during an application execution is lost when a container is restarted or erased.</li>
<li>This behavior can be overridden by making a directory on the host available inside the container for saving data persistently.</li>
<li>Containers may be configured to start and stop with the transitioning of the host system via the systemd service. These advanced tasks are also performed with the <code>podman</code> command.</li>
</ul>

<h2 class="relative group">Containers and Port Mapping
    <div id="containers-and-port-mapping" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#containers-and-port-mapping" aria-label="Anchor">#</a>
    </span>
    
</h2>
<ul>
<li>Applications running in different containers often need to exchange data for proper operation.</li>
<li>For instance, a containerized Apache web server may need to talk to a MySQL database instance running in a different container.</li>
<li>It may also need to talk to the outside world over a port such as 80 or 8080.</li>
<li>To support this traffic flow, appropriate port mappings are established between the host system and each container.</li>
</ul>
<p>EXAM TIP: As a normal user, you cannot map a host port below 1024 to a container port.</p>

<h3 class="relative group">Lab: Configure Port Mapping
    <div id="lab-configure-port-mapping" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#lab-configure-port-mapping" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Launch a container called rhel7-port-map in detached mode (as a daemon) with host port 10000 mapped to port 8000 inside the container.</li>
<li>Use a version of the RHEL 7 image with Apache web server software pre-installed.</li>
<li>This image is available from a Red Hat container registry.</li>
<li>List the running container and confirm the port mapping.</li>
</ul>
<p>1. Search for an Apache web server image for RHEL 7 using podman
search:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ podman search registry.redhat.io/rhel7/httpd
</span></span><span class="line"><span class="cl"> NAME                                      DESCRIPTION
</span></span><span class="line"><span class="cl"> registry.redhat.io/rhscl/httpd-24-rhel7   Apache HTTP 2.4 Server
</span></span></code></pre></div><p>2. Log in to registry.redhat.io using the Red Hat credentials to access
the image:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ podman login registry.redhat.io
</span></span><span class="line"><span class="cl"> Username: tdavetech@gmail.com
</span></span><span class="line"><span class="cl"> Password: 
</span></span><span class="line"><span class="cl"> Login Succeeded!
</span></span></code></pre></div><p>3. Download the latest version of the Apache image using podman pull:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ podman pull registry.redhat.io/rhscl/httpd-24- rhel7
</span></span><span class="line"><span class="cl"> Trying to pull registry.redhat.io/rhscl/httpd-24-rhel7:latest...
</span></span><span class="line"><span class="cl"> Getting image <span class="nb">source</span> signatures
</span></span><span class="line"><span class="cl"> Checking <span class="k">if</span> image destination supports signatures
</span></span><span class="line"><span class="cl"> Copying blob fd77da0b900b <span class="k">done</span>   <span class="p">|</span> 
</span></span><span class="line"><span class="cl"> Copying blob 7f2c2c4492b6 <span class="k">done</span>   <span class="p">|</span> 
</span></span><span class="line"><span class="cl"> Copying blob ea092d7970b2 <span class="k">done</span>   <span class="p">|</span> 
</span></span><span class="line"><span class="cl"> Copying config 847db19d6c <span class="k">done</span>   <span class="p">|</span> 
</span></span><span class="line"><span class="cl"> Writing manifest to image destination
</span></span><span class="line"><span class="cl"> Storing signatures
</span></span><span class="line"><span class="cl"> 847db19d6cbc726106c901a7713d30dccc9033031ec812037c4c458319a1b328
</span></span></code></pre></div><p>4. Verify the download using podman images:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ podman images
</span></span><span class="line"><span class="cl"> REPOSITORY                               TAG         IMAGE ID       CREATED       SIZE
</span></span><span class="line"><span class="cl"> registry.redhat.io/rhscl/httpd-24-rhel7  latest      847db19d6cbc  <span class="m">2</span>  months ago  <span class="m">332</span> MB
</span></span></code></pre></div><p>5. Launch a container named <em>rhel7-port-map</em> in detached mode to run the containerized Apache web server with host port 10000
mapped to container port 8000.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ podman run -dp 10000:8000 --name rhel7-port-map  httpd-24-rhel7
</span></span><span class="line"><span class="cl"> cd063dff352dfbcd57dd417587513b12ca4033ed657f3baaa28d54df19d4df1c
</span></span></code></pre></div><p>6. Verify that the container was launched successfully using podman ps:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ podman ps
</span></span><span class="line"><span class="cl"> CONTAINER ID  IMAGE                                           COMMAND               CREATED         STATUS         PORTS                    NAMES
</span></span><span class="line"><span class="cl"> cd063dff352d  registry.redhat.io/rhscl/httpd-24-rhel7:latest   /usr/bin/run-http...  <span class="m">36</span> seconds ago  Up <span class="m">36</span> seconds  0.0.0.0:10000- &gt;8000/tcp  rhel7-port-map
</span></span></code></pre></div><p>7. You can also use <code>podman port</code> to view the mapping:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ podman port rhel7-port-map
</span></span><span class="line"><span class="cl"> 8000/tcp -&gt; 0.0.0.0:10000
</span></span></code></pre></div><ul>
<li>Now any inbound web traffic on host port 10000 will be redirected to the container.</li>
</ul>

<h3 class="relative group">Exercise 22-7: Stop, Restart, and Remove a Container
    <div id="exercise-22-7-stop-restart-and-remove-a-container" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#exercise-22-7-stop-restart-and-remove-a-container" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Stop the container, restart it, stop it again, and then erase it.</li>
<li>Use appropriate <code>podman</code> subcommands and verify each transition.</li>
</ul>
<p>1. Verify the current operational state of the container rhel7-port-map:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ podman ps
</span></span><span class="line"><span class="cl"> CONTAINER ID  IMAGE                                           COMMAND               CREATED        STATUS        PORTS                    NAMES
</span></span><span class="line"><span class="cl"> cd063dff352d  registry.redhat.io/rhscl/httpd-24-rhel7:latest   /usr/bin/run-http...  <span class="m">3</span> minutes ago  Up <span class="m">3</span> minutes  0.0.0.0:10000- &gt;8000/tcp  rhel7-port-map
</span></span></code></pre></div><p>2. Stop the container and confirm.
(the <code>-a</code> option with <code>ps</code> also includes the stopped containers in the output):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ podman stop rhel7-port-map
</span></span><span class="line"><span class="cl"> rhel7-port-map
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ podman ps -a
</span></span><span class="line"><span class="cl"> CONTAINER ID  IMAGE                                           COMMAND               CREATED        STATUS                    PORTS                    NAMES
</span></span><span class="line"><span class="cl"> cd063dff352d  registry.redhat.io/rhscl/httpd-24-rhel7:latest   /usr/bin/run-http...  <span class="m">6</span> minutes ago  Exited <span class="o">(</span>0<span class="o">)</span> <span class="m">5</span> seconds ago   0.0.0.0:10000-&gt;8000/tcp  rhel7-port-map
</span></span></code></pre></div><p>3. Start the container and confirm:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ podman start rhel7-port-map
</span></span><span class="line"><span class="cl"> rhel7-port-map
</span></span><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ podman ps -a
</span></span><span class="line"><span class="cl"> CONTAINER ID  IMAGE                                           COMMAND               CREATED        STATUS         PORTS                    NAMES
</span></span><span class="line"><span class="cl"> cd063dff352d  registry.redhat.io/rhscl/httpd-24-rhel7:latest   /usr/bin/run-http...  <span class="m">8</span> minutes ago  Up <span class="m">11</span> seconds  0.0.0.0:10000- &gt;8000/tcp  rhel7-port-map
</span></span></code></pre></div><p>4. Stop the container and remove it:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ podman rm rhel7-port-map
</span></span><span class="line"><span class="cl"> rhel7-port-map
</span></span></code></pre></div><p>5. Confirm the removal:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ podman ps -a
</span></span><span class="line"><span class="cl"> CONTAINER ID  IMAGE       COMMAND     CREATED     STATUS      PORTS       NAMES
</span></span></code></pre></div>
<h2 class="relative group">Containers and Environment Variables
    <div id="containers-and-environment-variables" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#containers-and-environment-variables" aria-label="Anchor">#</a>
    </span>
    
</h2>
<ul>
<li>Many times it is necessary to pass a host&rsquo;s pre-defined environment variable, such as PATH, to a containerized application for consumption.</li>
<li>Moreover, it may also be necessary at times to set new variables to inject debugging flags or sensitive information such as passwords, access keys, or other secrets for use inside containers.</li>
<li>Passing host environment variables or setting new environment variables is done at the time of launching a container.</li>
<li>The <code>podman</code> command allows multiple variables to be passed or set with the <code>-e</code> option.</li>
</ul>
<p>EXAM TIP: Use the <code>-e</code> option with each variable that you want to pass or set.</p>

<h3 class="relative group">Lab: Pass and Set Environment Variables
    <div id="lab-pass-and-set-environment-variables" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#lab-pass-and-set-environment-variables" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Launch a container using the latest version of a ubi for RHEL 9 available in a Red Hat container registry.</li>
<li>Inject the HISTSIZE environment variable, and a variable called SECRET with a value &ldquo;secret123&rdquo;.</li>
<li>Name this container rhel9-env-vars and have a shell terminal opened to check the variable settings.</li>
<li>Remove this container.</li>
</ul>
<p>1. Launch a container with an interactive terminal session and inject variables <strong>HISTSIZE</strong> and <strong>SECRET</strong> as directed. Use the specified container image.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ podman run -it -e HISTSIZE -e <span class="nv">SECRET</span><span class="o">=</span><span class="s2">&#34;secret123&#34;</span> --name rhel9-env-vars ubi9
</span></span><span class="line"><span class="cl"> Resolved <span class="s2">&#34;ubi9&#34;</span> as an <span class="nb">alias</span> <span class="o">(</span>/etc/containers/registries.conf.d/001- rhel-shortnames.conf<span class="o">)</span>
</span></span><span class="line"><span class="cl"> Trying to pull registry.access.redhat.com/ubi9:latest...
</span></span><span class="line"><span class="cl"> Getting image <span class="nb">source</span> signatures
</span></span><span class="line"><span class="cl"> Checking <span class="k">if</span> image destination supports signatures
</span></span><span class="line"><span class="cl"> Copying blob cc296d75b612 <span class="k">done</span>   <span class="p">|</span> 
</span></span><span class="line"><span class="cl"> Copying config 159a1e6731 <span class="k">done</span>   <span class="p">|</span> 
</span></span><span class="line"><span class="cl"> Writing manifest to image destination
</span></span><span class="line"><span class="cl"> Storing signatures
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@b587355b8fc1 /<span class="o">]</span><span class="c1"># </span>
</span></span></code></pre></div><p>2. Verify both variables using the echo command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@b587355b8fc1 /<span class="o">]</span><span class="c1"># echo $HISTSIZE $SECRET</span>
</span></span><span class="line"><span class="cl"> <span class="m">1000</span> secret123
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@b587355b8fc1 /<span class="o">]</span><span class="c1"># </span>
</span></span></code></pre></div><p>3. Disconnect from the container, and stop and remove it:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ podman stop rhel9-env-vars
</span></span><span class="line"><span class="cl"> rhel9-env-vars
</span></span><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ podman rm rhel9-env-vars
</span></span><span class="line"><span class="cl"> rhel9-env-vars
</span></span></code></pre></div><p>Confirm the deletion:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ podman ps -a
</span></span><span class="line"><span class="cl"> CONTAINER ID  IMAGE       COMMAND     CREATED     STATUS      PORTS       NAMES
</span></span></code></pre></div>
<h2 class="relative group">Containers and Persistent Storage
    <div id="containers-and-persistent-storage" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#containers-and-persistent-storage" aria-label="Anchor">#</a>
    </span>
    
</h2>
<ul>
<li>Containers are normally launched for a period of time to run an application and then stopped or deleted when their job is finished.</li>
<li>Any data that is produced during runtime is lost on their restart, failure, or termination.</li>
<li>This data may be saved for persistence on a host directory by attaching the host directory to a container.</li>
<li>The containerized application will see the attached directory just like any other local directory and will use it to store data if it is configured to do so.</li>
<li>Any data that is saved on the directory will be available even after the container is rebooted or removed.</li>
<li>Later, this directory can be re-attached to other containers to give them access to the stored data or to save their own data.</li>
<li>The source directory on the host may itself exist on any local or remote file system.</li>
</ul>
<p>EXAM TIP: Proper ownership, permissions, and SELinux file type must be set to ensure persistent storage is accessed and allows data writes without issues.</p>
<ul>
<li>There are a few simple steps that should be performed to configure a host directory before it can be attached to a container.</li>
<li>These steps include the correct ownership, permissions, and SELinux type (<em>container_file_t</em>).</li>
<li>The special SELinux file type is applied to prevent containerized applications (especially those running in root containers) from gaining undesired privileged access to host files and processes, or other running containers on the host if compromised.</li>
</ul>

<h3 class="relative group">Lab: Attach Persistent Storage and Access Data Across Containers
    <div id="lab-attach-persistent-storage-and-access-data-across-containers" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#lab-attach-persistent-storage-and-access-data-across-containers" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Set up a directory on server20 and attach it to a new container.</li>
<li>Write some data to the directory while in the container.</li>
<li>Delete the container and launch another container with the same directory attached.</li>
<li>Observe the persistence of saved data in the new container and that it is accessible.</li>
<li>Remove the container to mark the completion of this exercise.</li>
</ul>
<p>1. Create a directory called /host_data, set full permissions on it, and confirm:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ sudo mkdir /host_data
</span></span><span class="line"><span class="cl"> <span class="o">[</span>sudo<span class="o">]</span> password <span class="k">for</span> user1: 
</span></span><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ sudo chmod <span class="m">777</span> /host_data/
</span></span><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ ll -d /host_data/
</span></span><span class="line"><span class="cl"> drwxrwxrwx. <span class="m">2</span> root root <span class="m">6</span> Aug  <span class="m">1</span> 22:59 /host_data/
</span></span></code></pre></div><p>2. Launch a root container called <em>rhel9-persistent-data</em>  in interactive mode using the latest ubi9 image. Specify the attachment point (<em>/container_data</em>) to be used inside the container for the host directory (<em>/host_data</em>) Ensure the SELinux type container_file_t is automatically set on the directory and files within.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ sudo podman run --name rhel9-persistent-data -v  /host_data:/container_data:Z -it ubi9
</span></span><span class="line"><span class="cl"> Resolved <span class="s2">&#34;ubi9&#34;</span> as an <span class="nb">alias</span> <span class="o">(</span>/etc/containers/registries.conf.d/001- rhel-shortnames.conf<span class="o">)</span>
</span></span><span class="line"><span class="cl"> Trying to pull registry.access.redhat.com/ubi9:latest...
</span></span><span class="line"><span class="cl"> Getting image <span class="nb">source</span> signatures
</span></span><span class="line"><span class="cl"> Checking <span class="k">if</span> image destination supports signatures
</span></span><span class="line"><span class="cl"> Copying blob cc296d75b612 <span class="k">done</span>   <span class="p">|</span> 
</span></span><span class="line"><span class="cl"> Copying config 159a1e6731 <span class="k">done</span>   <span class="p">|</span> 
</span></span><span class="line"><span class="cl"> Writing manifest to image destination
</span></span><span class="line"><span class="cl"> Storing signatures
</span></span></code></pre></div><p>3. Confirm the presence of the directory inside the container with <code>ls</code> on /container_data:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@e8711892370f /<span class="o">]</span><span class="c1"># ls -ldZ /container_data</span>
</span></span><span class="line"><span class="cl"> drwxrwxrwx. <span class="m">2</span> root root  system_u:object_r:container_file_t:s0:c376,c965 <span class="m">6</span> Aug  <span class="m">2</span> 05:59  /container_data
</span></span></code></pre></div><p>4. Create a file called testfile with the echo command under /container_data:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@e8711892370f /<span class="o">]</span><span class="c1"># echo &#34;This is persistent storage.&#34; &gt;  /container_data/testfile</span>
</span></span></code></pre></div><p>5. Verify the file creation and the SELinux type on it:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@e8711892370f /<span class="o">]</span><span class="c1"># ls -lZ /container_data/</span>
</span></span><span class="line"><span class="cl"> total <span class="m">4</span>
</span></span><span class="line"><span class="cl"> -rw-r--r--. <span class="m">1</span> root root  system_u:object_r:container_file_t:s0:c376,c965 <span class="m">28</span> Aug  <span class="m">2</span> 06:03  testfile
</span></span></code></pre></div><p>6. Exit out of the container and check the presence of the file in the host directory:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@e8711892370f /<span class="o">]</span><span class="c1"># exit</span>
</span></span><span class="line"><span class="cl"> <span class="nb">exit</span>
</span></span><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ ls -lZ /host_data/
</span></span><span class="line"><span class="cl"> total <span class="m">4</span>
</span></span><span class="line"><span class="cl"> -rw-r--r--. <span class="m">1</span> root root  system_u:object_r:container_file_t:s0:c376,c965 <span class="m">28</span> Aug  <span class="m">1</span> 23:03  testfile
</span></span></code></pre></div><p>7. Stop and remove the container:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ sudo podman stop rhel9-persistent-data
</span></span><span class="line"><span class="cl"> rhel9-persistent-data
</span></span><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ sudo podman rm rhel9-persistent-data
</span></span><span class="line"><span class="cl"> rhel9-persistent-data
</span></span></code></pre></div><p>8. Launch a new root container called <em>rhel8-persistent-data</em> in interactive mode using the latest ubi8 image from any of the defined registries. Specify the attachment point (<em>/container_data2</em>) to be used inside the container for the host directory (<em>/host_data</em>). Ensure the SELinux type <em>container_file_t</em> is automatically set on the directory and files within.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ sudo podman run -it --name rhel8-persistent-data -v /host_data:/container_data2:Z ubi8
</span></span><span class="line"><span class="cl"> Resolved <span class="s2">&#34;ubi8&#34;</span> as an <span class="nb">alias</span> <span class="o">(</span>/etc/containers/registries.conf.d/001- rhel-shortnames.conf<span class="o">)</span>
</span></span><span class="line"><span class="cl"> Trying to pull registry.access.redhat.com/ubi8:latest...
</span></span><span class="line"><span class="cl"> Getting image <span class="nb">source</span> signatures
</span></span><span class="line"><span class="cl"> Checking <span class="k">if</span> image destination supports signatures
</span></span><span class="line"><span class="cl"> Copying blob 8694db102e5b <span class="k">done</span>   <span class="p">|</span> 
</span></span><span class="line"><span class="cl"> Copying config 269749ad51 <span class="k">done</span>   <span class="p">|</span> 
</span></span><span class="line"><span class="cl"> Writing manifest to image destination
</span></span><span class="line"><span class="cl"> Storing signatures 
</span></span></code></pre></div><p>9. Confirm the presence of the directory inside the container with ls on /container_data2:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@af6773299c7e /<span class="o">]</span><span class="c1"># ls -ldZ /container_data2/</span>
</span></span><span class="line"><span class="cl"> drwxrwxrwx. <span class="m">2</span> root root  system_u:object_r:container_file_t:s0:c198,c914 <span class="m">22</span> Aug  <span class="m">2</span> 06:03  /container_data2/
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@af6773299c7e /<span class="o">]</span><span class="c1"># ls -lZ /container_data2/</span>
</span></span><span class="line"><span class="cl"> total <span class="m">4</span>
</span></span><span class="line"><span class="cl"> -rw-r--r--. <span class="m">1</span> root root  system_u:object_r:container_file_t:s0:c198,c914 <span class="m">28</span> Aug  <span class="m">2</span> 06:03  testfile
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@af6773299c7e /<span class="o">]</span><span class="c1"># cat /container_data2/testfile</span>
</span></span><span class="line"><span class="cl"> This is persistent storage.
</span></span></code></pre></div><p>10. Create a file called testfile2 with the echo command under /container_data2:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@af6773299c7e /<span class="o">]</span><span class="c1"># echo &#34;This is persistent storage2.&#34; &gt;  /container_data2/testfile2</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@af6773299c7e /<span class="o">]</span><span class="c1"># ls -lZ /container_data2/</span>
</span></span><span class="line"><span class="cl"> total <span class="m">8</span>
</span></span><span class="line"><span class="cl"> -rw-r--r--. <span class="m">1</span> root root  system_u:object_r:container_file_t:s0:c198,c914 <span class="m">28</span> Aug  <span class="m">2</span> 06:03  testfile
</span></span><span class="line"><span class="cl"> -rw-r--r--. <span class="m">1</span> root root  system_u:object_r:container_file_t:s0:c198,c914 <span class="m">29</span> Aug  <span class="m">2</span> 06:10  testfile2
</span></span></code></pre></div><p>11. Exit out of the container and confirm the existence of both files in the host directory:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@af6773299c7e /<span class="o">]</span><span class="c1"># exit</span>
</span></span><span class="line"><span class="cl"> <span class="nb">exit</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ ls -lZ /host_data/
</span></span><span class="line"><span class="cl"> total <span class="m">8</span>
</span></span><span class="line"><span class="cl"> -rw-r--r--. <span class="m">1</span> root root  system_u:object_r:container_file_t:s0:c198,c914 <span class="m">28</span> Aug  <span class="m">1</span> 23:03  testfile
</span></span><span class="line"><span class="cl"> -rw-r--r--. <span class="m">1</span> root root  system_u:object_r:container_file_t:s0:c198,c914 <span class="m">29</span> Aug  <span class="m">1</span> 23:10  testfile2
</span></span></code></pre></div><p>12. Stop and remove the container using the stop and rm subcommands:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ sudo podman stop rhel8-persistent-data
</span></span><span class="line"><span class="cl"> rhel8-persistent-data
</span></span><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ sudo podman rm rhel8-persistent-data
</span></span><span class="line"><span class="cl"> rhel8-persistent-data
</span></span></code></pre></div><p>13. Re-check the presence of the files in the host directory:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ ll /host_data
</span></span><span class="line"><span class="cl"> total <span class="m">8</span>
</span></span><span class="line"><span class="cl"> -rw-r--r--. <span class="m">1</span> root root <span class="m">28</span> Aug  <span class="m">1</span> 23:03 testfile
</span></span><span class="line"><span class="cl"> -rw-r--r--. <span class="m">1</span> root root <span class="m">29</span> Aug  <span class="m">1</span> 23:10 testfile2
</span></span></code></pre></div>
<h2 class="relative group">Container State Management with systemd
    <div id="container-state-management-with-systemd" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#container-state-management-with-systemd" aria-label="Anchor">#</a>
    </span>
    
</h2>
<ul>
<li>
<p>Multiple containers run on a single host and it becomes a challenging task to change their operational state or delete them manually.</p>
</li>
<li>
<p>In RHEL 9, these administrative functions can be automated via the systemd service</p>
</li>
<li>
<p>There are several steps that need to be completed to configure container state management via systemd.</p>
</li>
<li>
<p>These steps vary for rootful and rootless container setups and include the creation of service unit files and their storage in appropriate directory locations (<em>~/.config/systemd/user</em> for rootless containers and <em>/etc/systemd/system</em> for rootful containers).</p>
</li>
<li>
<p>Once setup and enabled, the containers will start and stop automatically as a systemd service with the host state transition or manually with the <code>systemctl</code> command.</p>
</li>
<li>
<p>The <code>podman</code> command to start and stop containers is no longer needed if the systemd setup is in place.</p>
</li>
<li>
<p>You may experience issues if you continue to use <code>podman</code> for container state transitioning alongside.</p>
</li>
<li>
<p>The start and stop behavior for rootless containers differs slightly from that of rootful containers.</p>
</li>
<li>
<p>For the rootless setup, the containers are started when the relevant user logs in to the host and stopped when that user logs off from all their open terminal sessions;</p>
</li>
<li>
<p>However, this default behavior can be altered by enabling <strong>lingering</strong> for that user with the <code>loginctl</code> command.</p>
</li>
<li>
<p>User lingering is a feature that, if enabled for a particular user, spawns a user manager for that user at system startup and keeps it running in the background to support long-running services configured for that user.</p>
</li>
<li>
<p>The user need not log in.</p>
</li>
</ul>
<p>EXAM TIP: Make sure that you use a normal user to launch rootless containers and the root user (or sudo) for rootful containers.</p>
<ul>
<li>Rootless setup does not require elevated privileges of the root user.</li>
</ul>

<h3 class="relative group">Lab: Configure a Rootful Container as a systemd Service
    <div id="lab-configure-a-rootful-container-as-a-systemd-service" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#lab-configure-a-rootful-container-as-a-systemd-service" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Create a systemd unit configuration file for managing the state of your rootful containers.</li>
<li>Launch a new container and use it as a template to generate a service unit file.</li>
<li>Stop and remove the launched container to avoid conflicts with new containers that will start.</li>
<li>Use the <code>systemctl</code> command to verify the automatic container start, stop, and deletion.</li>
</ul>
<p>1. Launch a new container called <em>rootful-container</em> in detached mode using the latest ubi9:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ sudo podman run -dt --name rootful-container ubi9
</span></span><span class="line"><span class="cl"> <span class="o">[</span>sudo<span class="o">]</span> password <span class="k">for</span> user1: 
</span></span><span class="line"><span class="cl"> 0ed04dcedec418068acd14c864e95e78f56a38dd57d2349cf2c46b0de1a1bf1b
</span></span></code></pre></div><p>2. Confirm the new container using podman ps. Note the container ID.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ sudo podman ps
</span></span><span class="line"><span class="cl"> CONTAINER ID  IMAGE                                   COMMAND      CREATED         STATUS         PORTS       NAMES
</span></span><span class="line"><span class="cl"> 0ed04dcedec4  registry.access.redhat.com/ubi9:latest  /bin/bash   <span class="m">20</span>  seconds ago  Up <span class="m">20</span> seconds              rootful-container
</span></span></code></pre></div><p>3. Create (generate) a service unit file called <em>rootful-container.service</em> under <em>/etc/systemd/system</em> while ensuring that the next new container that will be launched based on this configuration file will not require the source container  to work. The <code>tee</code> command will show the generated file content on the screen as well as store it in the specified file.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ sudo podman generate systemd --new --name  rootful-container <span class="p">|</span> sudo tee /etc/systemd/system/rootful-qcontainer.service
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="o">[</span>Unit<span class="o">]</span>
</span></span><span class="line"><span class="cl"> <span class="nv">Description</span><span class="o">=</span>Podman container-rootful-container.service
</span></span><span class="line"><span class="cl"> <span class="nv">Documentation</span><span class="o">=</span>man:podman-generate-systemd<span class="o">(</span>1<span class="o">)</span>
</span></span><span class="line"><span class="cl"> <span class="nv">Wants</span><span class="o">=</span>network-online.target
</span></span><span class="line"><span class="cl"> <span class="nv">After</span><span class="o">=</span>network-online.target
</span></span><span class="line"><span class="cl"> <span class="nv">RequiresMountsFor</span><span class="o">=</span>%t/containers
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="o">[</span>Service<span class="o">]</span>
</span></span><span class="line"><span class="cl"> <span class="nv">Environment</span><span class="o">=</span><span class="nv">PODMAN_SYSTEMD_UNIT</span><span class="o">=</span>%n
</span></span><span class="line"><span class="cl"> <span class="nv">Restart</span><span class="o">=</span>on-failure
</span></span><span class="line"><span class="cl"> <span class="nv">TimeoutStopSec</span><span class="o">=</span><span class="m">70</span>
</span></span><span class="line"><span class="cl"> <span class="nv">ExecStart</span><span class="o">=</span>/usr/bin/podman run <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--cidfile<span class="o">=</span>%t/%n.ctr-id <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--cgroups<span class="o">=</span>no-conmon <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--rm <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--sdnotify<span class="o">=</span>conmon <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--replace <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	-dt <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--name rootful-container ubi9
</span></span><span class="line"><span class="cl"> <span class="nv">ExecStop</span><span class="o">=</span>/usr/bin/podman stop <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--ignore -t <span class="m">10</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--cidfile<span class="o">=</span>%t/%n.ctr-id
</span></span><span class="line"><span class="cl"> <span class="nv">ExecStopPost</span><span class="o">=</span>/usr/bin/podman rm <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	-f <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--ignore -t <span class="m">10</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--cidfile<span class="o">=</span>%t/%n.ctr-id
</span></span><span class="line"><span class="cl"> <span class="nv">Type</span><span class="o">=</span>notify
</span></span><span class="line"><span class="cl"> <span class="nv">NotifyAccess</span><span class="o">=</span>all
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="o">[</span>Install<span class="o">]</span>
</span></span><span class="line"><span class="cl"> <span class="nv">WantedBy</span><span class="o">=</span>default.target
</span></span></code></pre></div><ul>
<li>The unit file has the same syntax as any other systemd service configuration file.</li>
<li>There are three sections&mdash;Unit, Service, and Install.
<ul>
<li>(1) The <strong>unit</strong> section provides a short description of the service, the manual page location, and the dependencies (wants and after).</li>
<li>(2) The <strong>service</strong> section highlights the full commands for starting (<strong>ExecStart</strong>) and stopping (<strong>ExecStop</strong>) containers.
<ul>
<li>It also highlights the commands that will be executed before the container start (<strong>ExecStartPre</strong>) and after the container stop (<strong>ExecStopPost</strong>).</li>
<li>There are a number of options and arguments with the commands to ensure a proper transition.</li>
<li>The <strong>restart</strong> on-failure stipulates that systemd will try to restart the container in the event of a failure.</li>
</ul>
</li>
<li>(3) The <strong>install</strong> section identifies the operational target the host needs to be running in before this container service can start.</li>
</ul>
</li>
</ul>
<p>4. Stop and delete the source container (rootful-container):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ sudo podman stop rootful-container
</span></span><span class="line"><span class="cl"> <span class="o">[</span>sudo<span class="o">]</span> password <span class="k">for</span> user1: 
</span></span><span class="line"><span class="cl"> WARN<span class="o">[</span>0010<span class="o">]</span> StopSignal SIGTERM failed to stop container rootful- container in <span class="m">10</span> seconds, resorting to SIGKILL 
</span></span><span class="line"><span class="cl"> rootful-container
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ sudo podman rm rootful-container
</span></span><span class="line"><span class="cl"> rootful-container
</span></span></code></pre></div><p>Verify the removal by running sudo podman ps -a:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ sudo podman ps -a
</span></span><span class="line"><span class="cl"> CONTAINER ID  IMAGE       COMMAND     CREATED     STATUS      PORTS       NAMES
</span></span></code></pre></div><p>5. Update systemd to bring the new service under its control (reboot the system if required):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ sudo systemctl daemon-reload
</span></span></code></pre></div><p>6. Enable and start the container service:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ sudo systemctl <span class="nb">enable</span> --now rootful-container
</span></span><span class="line"><span class="cl"> Created symlink /etc/systemd/system/default.target.wants/rootful- container.service  /etc/systemd/system/rootful-container.service.
</span></span></code></pre></div><p>7. Check the running status of the new service:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ sudo systemctl status rootful-container
</span></span><span class="line"><span class="cl"> rootful-container.service - Podman container-rootful-container.s&gt;
</span></span><span class="line"><span class="cl">     Loaded: loaded <span class="o">(</span>/etc/systemd/system/rootful-container.service&gt;
</span></span><span class="line"><span class="cl">     Active: active <span class="o">(</span>running<span class="o">)</span>
</span></span></code></pre></div><p>8. Verify the launch of a new container (compare the container ID with that of the source root container):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ sudo podman ps
</span></span><span class="line"><span class="cl"> CONTAINER ID  IMAGE                                   COMMAND      CREATED             STATUS             PORTS       NAMES
</span></span><span class="line"><span class="cl"> 440a57c26186  registry.access.redhat.com/ubi9:latest  /bin/bash    About a minute ago  Up About a minute              rootful-container
</span></span></code></pre></div><p>9. Restart the container service using the systemctl command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ sudo systemctl restart rootful-container
</span></span><span class="line"><span class="cl"> sudo systemctl status rootful-
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ sudo systemctl status rootful-container
</span></span><span class="line"><span class="cl"> rootful-container.service - Podman container-rootful-container.s&gt;
</span></span><span class="line"><span class="cl">     Loaded: loaded <span class="o">(</span>/etc/systemd/system/rootful-container.service&gt;
</span></span><span class="line"><span class="cl">     Active: active <span class="o">(</span>running<span class="o">)</span>
</span></span></code></pre></div><p>10. Check the status of the container again. Observe the removal of the previous container and the launch of a new container (compare container IDs).</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ sudo podman ps
</span></span><span class="line"><span class="cl"> CONTAINER ID  IMAGE                                   COMMAND      CREATED         STATUS             PORTS       NAMES
</span></span><span class="line"><span class="cl"> 0a980537b83a  registry.access.redhat.com/ubi9:latest  /bin/bash   <span class="m">59</span>  seconds ago  Up About a minute              rootful-container
</span></span></code></pre></div><ul>
<li>Each time the rootful-container service is restarted or server20 is rebooted, a new container will be launched.</li>
</ul>

<h3 class="relative group">Lab: Configure Rootless Container as a systemd Service
    <div id="lab-configure-rootless-container-as-a-systemd-service" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#lab-configure-rootless-container-as-a-systemd-service" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Create a systemd unit configuration file for managing the state of your rootless containers.</li>
<li>Launch a new container as conuser1 (create this user) and use it as a template to generate a service unit file.</li>
<li>Stop and remove the launched container to avoid conflicts with new containers that will start.</li>
<li>Use the <code>systemctl</code> command as conuser1 to verify the automatic container start, stop, and deletion.</li>
</ul>
<p>1. Create a user account called conuser1 and assign a simple password:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ sudo useradd conuser1
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="o">[</span>user1@server30 ~<span class="o">]</span>$ <span class="nb">echo</span> conuser1 <span class="p">|</span> sudo passwd -- stdin conuser1
</span></span><span class="line"><span class="cl"> Changing password <span class="k">for</span> user conuser1.
</span></span><span class="line"><span class="cl"> passwd: all authentication tokens updated  successfully.
</span></span></code></pre></div><p>2. Open a new terminal window on server20 and log in as conuser1. Create directory <em>~/.config/systemd/user</em> to store a service unit file:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conuser1@server30 ~<span class="o">]</span>$ mkdir ~/.config/systemd/user -p
</span></span></code></pre></div><p>3. Launch a new container called rootless-container in detached mode using the latest ubi8:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conuser1@server30 ~<span class="o">]</span>$ podman run -dt --name  rootless-container ubi8
</span></span><span class="line"><span class="cl"> Resolved <span class="s2">&#34;ubi8&#34;</span> as an <span class="nb">alias</span>  <span class="o">(</span>/etc/containers/registries.conf.d/001-rhel- shortnames.conf<span class="o">)</span>
</span></span><span class="line"><span class="cl"> Trying to pull  registry.access.redhat.com/ubi8:latest...
</span></span><span class="line"><span class="cl"> Getting image <span class="nb">source</span> signatures
</span></span><span class="line"><span class="cl"> Checking <span class="k">if</span> image destination supports signatures
</span></span><span class="line"><span class="cl"> Copying blob 8694db102e5b <span class="k">done</span>   <span class="p">|</span> 
</span></span><span class="line"><span class="cl"> Copying config 269749ad51 <span class="k">done</span>   <span class="p">|</span> 
</span></span><span class="line"><span class="cl"> Writing manifest to image destination
</span></span><span class="line"><span class="cl"> Storing signatures
</span></span><span class="line"><span class="cl"> 381d46ae9a3e11723c3bde35090782129e6937c461f8c2621bc9725f6b9efc27
</span></span></code></pre></div><p>4. Confirm the new container using podman ps. Note the container ID.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conuser1@server30 ~<span class="o">]</span>$ podman ps
</span></span><span class="line"><span class="cl"> CONTAINER ID  IMAGE                                   COMMAND     CREATED         STATUS         PORTS       NAMES
</span></span><span class="line"><span class="cl"> 381d46ae9a3e  registry.access.redhat.com/ubi8:latest  /bin/bash   <span class="m">27</span> seconds ago  Up <span class="m">27</span> seconds              rootless-container
</span></span></code></pre></div><p>5. Create (generate) a service unit file called <em>rootless-container.service</em> under <em>~/.config/systemd/user</em> while ensuring that the next new container that will be launched based on this configuration will not require the source container to work:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conuser1@server30 ~<span class="o">]</span>$ podman generate systemd --new --name rootless-container &gt;  ~/.config/systemd/user/rootless-container.service
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> DEPRECATED command:
</span></span><span class="line"><span class="cl"> It is recommended to use Quadlets <span class="k">for</span> running  containers and pods under systemd.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> Please refer to podman-systemd.unit<span class="o">(</span>5<span class="o">)</span> <span class="k">for</span> details.
</span></span></code></pre></div><p>6. Display the content of the unit file:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conuser1@server30 ~<span class="o">]</span>$ cat  ~/.config/systemd/user/rootless-container.service 
</span></span><span class="line"><span class="cl"> <span class="c1"># container-rootless-container.service</span>
</span></span><span class="line"><span class="cl"> <span class="c1"># autogenerated by Podman 4.9.4-rhel</span>
</span></span><span class="line"><span class="cl"> <span class="c1"># Thu Aug  1 23:42:11 MST 2024</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="o">[</span>Unit<span class="o">]</span>
</span></span><span class="line"><span class="cl"> <span class="nv">Description</span><span class="o">=</span>Podman container-rootless- container.service
</span></span><span class="line"><span class="cl"> <span class="nv">Documentation</span><span class="o">=</span>man:podman-generate-systemd<span class="o">(</span>1<span class="o">)</span>
</span></span><span class="line"><span class="cl"> <span class="nv">Wants</span><span class="o">=</span>network-online.target
</span></span><span class="line"><span class="cl"> <span class="nv">After</span><span class="o">=</span>network-online.target
</span></span><span class="line"><span class="cl"> <span class="nv">RequiresMountsFor</span><span class="o">=</span>%t/containers
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="o">[</span>Service<span class="o">]</span>
</span></span><span class="line"><span class="cl"> <span class="nv">Environment</span><span class="o">=</span><span class="nv">PODMAN_SYSTEMD_UNIT</span><span class="o">=</span>%n
</span></span><span class="line"><span class="cl"> <span class="nv">Restart</span><span class="o">=</span>on-failure
</span></span><span class="line"><span class="cl"> <span class="nv">TimeoutStopSec</span><span class="o">=</span><span class="m">70</span>
</span></span><span class="line"><span class="cl"> <span class="nv">ExecStart</span><span class="o">=</span>/usr/bin/podman run <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--cidfile<span class="o">=</span>%t/%n.ctr-id <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--cgroups<span class="o">=</span>no-conmon <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--rm <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--sdnotify<span class="o">=</span>conmon <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--replace <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	-dt <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--name rootless-container ubi8
</span></span><span class="line"><span class="cl"> <span class="nv">ExecStop</span><span class="o">=</span>/usr/bin/podman stop <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--ignore -t <span class="m">10</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--cidfile<span class="o">=</span>%t/%n.ctr-id
</span></span><span class="line"><span class="cl"> <span class="nv">ExecStopPost</span><span class="o">=</span>/usr/bin/podman rm <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	-f <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--ignore -t <span class="m">10</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--cidfile<span class="o">=</span>%t/%n.ctr-id
</span></span><span class="line"><span class="cl"> <span class="nv">Type</span><span class="o">=</span>notify
</span></span><span class="line"><span class="cl"> <span class="nv">NotifyAccess</span><span class="o">=</span>all
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="o">[</span>Install<span class="o">]</span>
</span></span><span class="line"><span class="cl"> <span class="nv">WantedBy</span><span class="o">=</span>default.target
</span></span></code></pre></div><p>7. Stop and delete the source container rootless-container using the stop and rm subcommands:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conuser1@server30 ~<span class="o">]</span>$ podman stop rootless-container
</span></span><span class="line"><span class="cl"> rootless-container
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="o">[</span>conuser1@server30 ~<span class="o">]</span>$ podman rm rootless-container
</span></span><span class="line"><span class="cl"> rootless-container
</span></span></code></pre></div><p>Verify the removal by running podman ps -a:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conuser1@server30 ~<span class="o">]</span>$ podman ps -a
</span></span><span class="line"><span class="cl"> CONTAINER ID  IMAGE       COMMAND     CREATED      STATUS      PORTS       NAMES
</span></span></code></pre></div><p>8. Update systemd to bring the new service to its control</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conuser1@server30 ~<span class="o">]</span>$ systemctl --user daemon-reload
</span></span></code></pre></div><p>9. Enable and start the container service:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conuser1@server30 ~<span class="o">]</span>$ systemctl --user <span class="nb">enable</span> --now rootless-container.service 
</span></span><span class="line"><span class="cl"> Created symlink  /home/conuser1/.config/systemd/user/default.target.wa nts/rootless-container.service   /home/conuser1/.config/systemd/user/rootless- container.service.
</span></span></code></pre></div><p>10. Check the running status of the new service:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> conuser1@server30 ~<span class="o">]</span>$ systemctl --user status  rootless-container
</span></span><span class="line"><span class="cl"> rootless-container.service - Podman container- rootless-container&gt;
</span></span><span class="line"><span class="cl">     Loaded: loaded <span class="o">(</span>/home/conuser1/.config/systemd/user/rootless-&gt;
</span></span><span class="line"><span class="cl">     Active: active <span class="o">(</span>running<span class="o">)</span>
</span></span></code></pre></div><p>11. Verify the launch of a new container (compare the container ID with that of the source rootless container):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conuser1@server30 ~<span class="o">]</span>$ podman ps
</span></span><span class="line"><span class="cl"> CONTAINER ID  IMAGE                                   COMMAND     CREATED             STATUS              PORTS       NAMES
</span></span><span class="line"><span class="cl"> 57f946085605  registry.access.redhat.com/ubi8:latest  /bin/bash   About a minute ago  Up About a minute              rootless-container
</span></span></code></pre></div><p>12. Enable the container service to start and stop with host transition using the <code>loginctl</code> command (systemd login manager) and confirm:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conuser1@server30 ~<span class="o">]</span>$ loginctl enable-linger
</span></span><span class="line"><span class="cl"> <span class="o">[</span>conuser1@server30 ~<span class="o">]</span>$ loginctl show-user conuser1 <span class="p">|</span> grep -i linger
</span></span><span class="line"><span class="cl"> <span class="nv">Linger</span><span class="o">=</span>yes
</span></span></code></pre></div><p>13. Restart the container service using the <code>systemctl</code> command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conuser1@server30 ~<span class="o">]</span>$ systemctl --user restart  rootless-container
</span></span><span class="line"><span class="cl"> <span class="o">[</span>conuser1@server30 ~<span class="o">]</span>$ systemctl --user status  rootless-container
</span></span><span class="line"><span class="cl"> rootless-container.service - Podman container- rootless-container&gt;
</span></span><span class="line"><span class="cl">     Loaded: loaded  <span class="o">(</span>/home/conuser1/.config/systemd/user/rootless-&gt;
</span></span><span class="line"><span class="cl">     Active: active <span class="o">(</span>running<span class="o">)</span>
</span></span></code></pre></div><p>14. Check the status of the container again. Observe the removal of the previous container and the launch of a new container (compare container IDs).</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conuser1@server30 ~<span class="o">]</span>$ podman ps
</span></span><span class="line"><span class="cl"> CONTAINER ID  IMAGE                                   COMMAND     CREATED         STATUS         PORTS       NAMES
</span></span><span class="line"><span class="cl"> 4dec33db41b5  registry.access.redhat.com/ubi8:latest  /bin/bash   <span class="m">41</span> seconds ago  Up <span class="m">41</span> seconds              rootless-container
</span></span></code></pre></div><ul>
<li>Each time the rootless-container service is restarted or server20 is rebooted, a new container will be launched. You can verify this by comparing their container IDs.</li>
</ul>

<h2 class="relative group">Containers DIY Labs
    <div id="containers-diy-labs" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#containers-diy-labs" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">Lab: Launch Named Root Container with Port Mapping
    <div id="lab-launch-named-root-container-with-port-mapping" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#lab-launch-named-root-container-with-port-mapping" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Create a new user account called conadm on server30 and give them full sudo rights.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@se
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> -bash: 3: <span class="nb">command</span> not found
</span></span><span class="line"><span class="cl"> rver30 ~<span class="o">]</span><span class="c1"># adduser conadm</span>
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@server30 ~<span class="o">]</span><span class="c1"># visudo</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> conadm <span class="nv">ALL</span><span class="o">=(</span>ALL<span class="o">)</span>        ALL
</span></span></code></pre></div><ul>
<li>As conadm with sudo (where required) on server30, inspect the latest version of ubi9 and then download it to your computer.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@server30 ~<span class="o">]</span><span class="c1"># dnf install container-tools</span>
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@server30 ~<span class="o">]</span><span class="c1"># podman login registry.redhat.io</span>
</span></span><span class="line"><span class="cl"> <span class="o">[</span>conuser1@server30 ~<span class="o">]</span>$ podman pull ubi9
</span></span><span class="line"><span class="cl"> Resolved <span class="s2">&#34;ubi9&#34;</span> as an <span class="nb">alias</span>  <span class="o">(</span>/etc/containers/registries.conf.d/001-rhel- shortnames.conf<span class="o">)</span>
</span></span><span class="line"><span class="cl"> Trying to pull  registry.access.redhat.com/ubi9:latest...
</span></span><span class="line"><span class="cl"> Getting image <span class="nb">source</span> signatures
</span></span><span class="line"><span class="cl"> Checking <span class="k">if</span> image destination supports signatures
</span></span><span class="line"><span class="cl"> Copying blob cc296d75b612 <span class="k">done</span>   <span class="p">|</span> 
</span></span><span class="line"><span class="cl"> Copying config 159a1e6731 <span class="k">done</span>   <span class="p">|</span> 
</span></span><span class="line"><span class="cl"> Writing manifest to image destination
</span></span><span class="line"><span class="cl"> Storing signatures  159a1e67312ef50059357047ebe2a365afea904504fca9561abb3 85ecd942d62
</span></span><span class="line"><span class="cl"> <span class="o">[</span>conuser1@server30 ~<span class="o">]</span>$ podman inspect ubi9
</span></span></code></pre></div><ul>
<li>Launch a container called <em>rootful-cont-port</em> in attached terminal mode with host port 80 mapped to container port 8080.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> sudo podman run -it --name rootful-cont-port -p  80:8080 ubi9
</span></span></code></pre></div><ul>
<li>Run a few basic Linux commands such as <code>ls</code>, <code>pwd</code>, <code>df</code>, <code>cat</code> <em>/etc/redhat-release</em>, and <em>os-release</em> while in the container.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@349163a6e431 /<span class="o">]</span><span class="c1"># ls</span>
</span></span><span class="line"><span class="cl"> afs  boot  etc	 lib	lost+found  mnt  proc  run    srv  tmp  var
</span></span><span class="line"><span class="cl"> bin  dev   home  lib64	media	    opt  root  sbin   sys  usr
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@349163a6e431 /<span class="o">]</span><span class="c1"># pwd</span>
</span></span><span class="line"><span class="cl"> /
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@349163a6e431 /<span class="o">]</span><span class="c1"># df -hT</span>
</span></span><span class="line"><span class="cl"> Filesystem     Type      Size  Used Avail Use%  Mounted on
</span></span><span class="line"><span class="cl"> overlay        overlay    17G  4.3G   13G  26% /
</span></span><span class="line"><span class="cl"> tmpfs          tmpfs      64M     <span class="m">0</span>   64M   0% /dev
</span></span><span class="line"><span class="cl"> shm            tmpfs      63M     <span class="m">0</span>   63M   0%  /dev/shm
</span></span><span class="line"><span class="cl"> tmpfs          tmpfs     356M  6.0M  350M   2%  /etc/hosts
</span></span><span class="line"><span class="cl"> devtmpfs       devtmpfs  4.0M     <span class="m">0</span>  4.0M   0%  /proc/keys
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@349163a6e431 /<span class="o">]</span><span class="c1"># cat /etc/redhat-release</span>
</span></span><span class="line"><span class="cl"> Red Hat Enterprise Linux release 9.4 <span class="o">(</span>Plow<span class="o">)</span>
</span></span></code></pre></div><ul>
<li>Check to confirm the port mapping from server30.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conadm@server30 ~<span class="o">]</span>$ sudo podman port rootful-cont- port
</span></span><span class="line"><span class="cl"> 8080/tcp -&gt; 0.0.0.0:80
</span></span></code></pre></div><ul>
<li>Do not remove the container yet.</li>
</ul>

<h3 class="relative group">Lab: Launch Nameless Rootless Container with Two Variables
    <div id="lab-launch-nameless-rootless-container-with-two-variables" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#lab-launch-nameless-rootless-container-with-two-variables" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>As conadm on server30, launch a container using the latest version of ubi8 in interactive mode (-it) with two environment variables VAR1=lab1 and VAR2=lab2 defined.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conadm@server30 ~<span class="o">]</span>$ podman run -d -e <span class="nv">VAR1</span><span class="o">=</span><span class="s2">&#34;lab1&#34;</span> -e <span class="nv">VAR2</span><span class="o">=</span><span class="s2">&#34;lab2&#34;</span> --name variables8 ubi8 
</span></span></code></pre></div><ul>
<li>Check the variables from within the container.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@803642faea28 /<span class="o">]</span><span class="c1"># echo $VAR1</span>
</span></span><span class="line"><span class="cl"> lab1
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@803642faea28 /<span class="o">]</span><span class="c1"># echo $VAR2</span>
</span></span><span class="line"><span class="cl"> lab2
</span></span></code></pre></div><ul>
<li>Delete the container and the image when done.</li>
</ul>

<h3 class="relative group">Lab: Launch Named Rootless Container with Persistent Storage
    <div id="lab-launch-named-rootless-container-with-persistent-storage" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#lab-launch-named-rootless-container-with-persistent-storage" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>As conadm with sudo (where required) on server30, create a directory called <em>/host_perm1</em> with full permissions, and a file called <em>str1</em> in it.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conadm@server30 ~<span class="o">]</span>$ sudo mkdir /host_perm1
</span></span><span class="line"><span class="cl"> <span class="o">[</span>sudo<span class="o">]</span> password <span class="k">for</span> conadm: 
</span></span><span class="line"><span class="cl"> <span class="o">[</span>conadm@server30 ~<span class="o">]</span>$ sudo chmod <span class="m">777</span> /host_perm1
</span></span><span class="line"><span class="cl"> <span class="o">[</span>conadm@server30 ~<span class="o">]</span>$ sudo touch /host_perm1/str1
</span></span></code></pre></div><ul>
<li>Launch a container called <em>rootless-cont-str</em> in attached terminal mode with the created directory mapped to <em>/cont_perm1</em> inside the container.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conadm@server30 ~<span class="o">]</span>$ sudo podman run --name  rootless-cont-str -v /host_perm1:/cont_perm1:Z -it  ubi8
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@a1326200eae1 /<span class="o">]</span><span class="c1"># </span>
</span></span></code></pre></div><ul>
<li>While in the container, check access to the directory and the presence of the file.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@a1326200eae1 /<span class="o">]</span><span class="c1"># ls /cont_perm1</span>
</span></span><span class="line"><span class="cl"> str1
</span></span></code></pre></div><ul>
<li>Create a sub-directory and a file under <em>/cont_perm1</em> and exit out of the container shell.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@a1326200eae1 cont_perm1<span class="o">]</span><span class="c1"># mkdir permdir2</span>
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@a1326200eae1 cont_perm1<span class="o">]</span><span class="c1"># ls</span>
</span></span><span class="line"><span class="cl"> permdir2  str1
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@a1326200eae1 cont_perm1<span class="o">]</span><span class="c1"># exit</span>
</span></span><span class="line"><span class="cl"> <span class="nb">exit</span>
</span></span><span class="line"><span class="cl"> <span class="o">[</span>conadm@server30 ~<span class="o">]</span>$ 
</span></span></code></pre></div><ul>
<li>List <em>/host_perm1</em> on server30 to verify the sub-directory and the file.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conadm@server30 ~<span class="o">]</span>$ sudo ls /host_perm1
</span></span><span class="line"><span class="cl"> permdir2  str1
</span></span></code></pre></div><ul>
<li>Stop and delete the container.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conadm@server30 ~<span class="o">]</span>$ podman stop rootless-cont-str
</span></span><span class="line"><span class="cl"> rootless-cont-str
</span></span><span class="line"><span class="cl"> <span class="o">[</span>conadm@server30 ~<span class="o">]</span>$ podman rm rootless-cont-str
</span></span><span class="line"><span class="cl"> rootless-cont-str
</span></span></code></pre></div><ul>
<li>Remove <em>/host_perm1</em>.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conadm@server30 ~<span class="o">]</span>$ sudo rm -r /host_perm1
</span></span></code></pre></div>
<h3 class="relative group">Lab: Launch Named Rootless Container with Port Mapping, Environment Variables, and Persistent Storage
    <div id="lab-launch-named-rootless-container-with-port-mapping-environment-variables-and-persistent-storage" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#lab-launch-named-rootless-container-with-port-mapping-environment-variables-and-persistent-storage" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>As conadm with sudo (where required) on server30, launch a named rootless container called <em>rootless-cont-adv</em> in attached mode with two variables (<strong>HISTSIZE</strong>=100 and <strong>MYNAME</strong>=RedHat), host port 9000 mapped to container port 8080, and <em>/host_perm2</em> mounted at <em>/cont_perm2</em></li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conadm@server30 ~<span class="o">]</span>$ podman run --name rootless-cont-adv -v ~/host_perm2:/cont_perm2:Z -e <span class="nv">HISTSIZE</span><span class="o">=</span><span class="s2">&#34;100&#34;</span> -e <span class="nv">MYNAME</span><span class="o">=</span><span class="s2">&#34;RedHat&#34;</span> -p 9000:8080 -it --replace ubi8
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@79e965cd1436 /<span class="o">]</span><span class="c1"># </span>
</span></span></code></pre></div><ul>
<li>Check and confirm the settings while inside the container.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@79e965cd1436 /<span class="o">]</span><span class="c1"># echo $HISTSIZE</span>
</span></span><span class="line"><span class="cl"> <span class="m">100</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@79e965cd1436 /<span class="o">]</span><span class="c1"># echo $MYNAME</span>
</span></span><span class="line"><span class="cl"> RedHat
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@79e965cd1436 /<span class="o">]</span><span class="c1"># ls -ld /cont_perm2 </span>
</span></span><span class="line"><span class="cl"> drwxrwxrwx. <span class="m">2</span> root root <span class="m">6</span> Aug  <span class="m">4</span> 02:16 /cont_perm2
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="o">[</span>conadm@server30 ~<span class="o">]</span>$ podman port rootless-cont-adv
</span></span><span class="line"><span class="cl"> 8080/tcp -&gt; 0.0.0.0:9000
</span></span></code></pre></div><ul>
<li>Exit out of the container.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@5d510a1b2293 /<span class="o">]</span><span class="c1"># exit</span>
</span></span><span class="line"><span class="cl"> <span class="nb">exit</span>
</span></span><span class="line"><span class="cl"> <span class="o">[</span>conadm@server30 ~<span class="o">]</span>$ 
</span></span></code></pre></div><ul>
<li>Do not remove the container yet.</li>
</ul>

<h3 class="relative group">Lab 22-5: Control Rootless Container States via systemd
    <div id="lab-22-5-control-rootless-container-states-via-systemd" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#lab-22-5-control-rootless-container-states-via-systemd" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>As conadm on server30, use the <em>rootless-cont-adv</em> container launched in the last lab as a template and generate a systemd service configuration file and store the file in the appropriate directory.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conadm@server30 ~<span class="o">]</span>$ podman run --name rootless-cont-adv -v ~/host_perm2:/cont_perm2:Z -e <span class="nv">HISTSIZE</span><span class="o">=</span><span class="s2">&#34;100&#34;</span> -e <span class="nv">MYNAME</span><span class="o">=</span><span class="s2">&#34;RedHat&#34;</span> -p 9000:8080 -dt --replace ubi8
</span></span><span class="line"><span class="cl"> da8faf434813242985b8e332dc06b0e6da78e7125bc36579ffc8d82b0bcafb8e
</span></span><span class="line"><span class="cl"> <span class="o">[</span>conadm@server30 ~<span class="o">]</span>$ podman generate systemd --new --name rootless-cont-adv &gt;  ~/.config/systemd/user/rootless-container.service
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> DEPRECATED command:
</span></span><span class="line"><span class="cl"> It is recommended to use Quadlets <span class="k">for</span> running  containers and pods under systemd.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> Please refer to podman-systemd.unit<span class="o">(</span>5<span class="o">)</span> <span class="k">for</span> details.
</span></span></code></pre></div><ul>
<li>Stop and remove the source container rootless-cont-adv.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conadm@server30 ~<span class="o">]</span>$ podman stop rootless-cont-adv
</span></span><span class="line"><span class="cl"> rootless-cont-adv
</span></span><span class="line"><span class="cl"> <span class="o">[</span>conadm@server30 ~<span class="o">]</span>$ podman rm rootless-cont-adv
</span></span><span class="line"><span class="cl"> rootless-cont-adv
</span></span></code></pre></div><ul>
<li>Add the support for the new service to systemd and enable the new service to auto-start at system reboots.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conadm@server30 ~<span class="o">]</span>$ systemctl --user daemon-reload
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="o">[</span>conadm@server30 user<span class="o">]</span>$ systemctl --user <span class="nb">enable</span> -- now rootless-container.service
</span></span><span class="line"><span class="cl"> Created symlink  /home/conadm/.config/systemd/user/default.target.want s/rootless-container.service   /home/conadm/.config/systemd/user/rootless- container.service.
</span></span></code></pre></div><ul>
<li>Perform the required setup to ensure the container is launched without the need for the conadm user to log in.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conadm@server30 user<span class="o">]</span>$ loginctl enable-linger
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="o">[</span>conadm@server30 user<span class="o">]</span>$ loginctl show-user conadm <span class="p">|</span>  grep -i linger
</span></span><span class="line"><span class="cl"> <span class="nv">Linger</span><span class="o">=</span>yes
</span></span></code></pre></div><ul>
<li>Reboot server30 and confirm a successful start of the container service and the container.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@rhcsa3 ~<span class="o">]</span><span class="c1"># systemctl --user --machine=conadm@ list-units --type=service</span>
</span></span><span class="line"><span class="cl">  UNIT                           LOAD   ACTIVE SUB     DESCRIPTION           &gt;
</span></span><span class="line"><span class="cl">  dbus-broker.service            loaded active running D-Bus User Message Bus
</span></span><span class="line"><span class="cl">  rootless-cont-adv.service      loaded active running Podman container-rootl&gt;
</span></span><span class="line"><span class="cl">  systemd-tmpfiles-setup.service loaded active exited  Create User<span class="s1">&#39;s Volatile&gt;
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">LOAD   = Reflects whether the unit definition was properly loaded.
</span></span></span><span class="line"><span class="cl"><span class="s1">ACTIVE = The high-level unit activation state, i.e. generalization of SUB.
</span></span></span><span class="line"><span class="cl"><span class="s1">SUB    = The low-level unit activation state, values depend on unit type.
</span></span></span><span class="line"><span class="cl"><span class="s1">3 loaded units listed. Pass --all to see loaded but inactive units, too.
</span></span></span><span class="line"><span class="cl"><span class="s1">To show all installed unit files use &#39;</span>systemctl list-unit-files<span class="err">&#39;</span>.
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@rhcsa3 ~<span class="o">]</span><span class="c1"># sudo -i -u conadm podman ps -a</span>
</span></span><span class="line"><span class="cl">CONTAINER ID  IMAGE                                   COMMAND     CREATED         STATUS         PORTS                   NAMES
</span></span><span class="line"><span class="cl">a48fd2c25be4  registry.access.redhat.com/ubi9:latest  /bin/bash   <span class="m">10</span> minutes ago  Up <span class="m">10</span> minutes  0.0.0.0:9000-&gt;8080/tcp  rootless-cont-adv
</span></span></code></pre></div>
<h3 class="relative group">Lab 22-6: Control Rootful Container States via systemd
    <div id="lab-22-6-control-rootful-container-states-via-systemd" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#lab-22-6-control-rootful-container-states-via-systemd" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>As conadm with sudo where required on server10, use the rootful-cont-port container launched in Lab 22-1 as a template and generate a systemd service configuration file and store the file in the appropriate directory.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@server30 ~<span class="o">]</span><span class="c1"># podman generate systemd --new -- name rootful-cont-port | tee  /etc/systemd/system/rootful-cont-port.service</span>
</span></span><span class="line"><span class="cl"> DEPRECATED command:
</span></span><span class="line"><span class="cl"> It is recommended to use Quadlets <span class="k">for</span> running  containers and pods under systemd.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> Please refer to podman-systemd.unit<span class="o">(</span>5<span class="o">)</span> <span class="k">for</span> details.
</span></span><span class="line"><span class="cl"> <span class="c1"># container-rootful-cont-port.service</span>
</span></span><span class="line"><span class="cl"> <span class="c1"># autogenerated by Podman 4.9.4-rhel</span>
</span></span><span class="line"><span class="cl"> <span class="c1"># Sat Aug  3 20:49:32 MST 2024</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="o">[</span>Unit<span class="o">]</span>
</span></span><span class="line"><span class="cl"> <span class="nv">Description</span><span class="o">=</span>Podman container-rootful-cont- port.service
</span></span><span class="line"><span class="cl"> <span class="nv">Documentation</span><span class="o">=</span>man:podman-generate-systemd<span class="o">(</span>1<span class="o">)</span>
</span></span><span class="line"><span class="cl"> <span class="nv">Wants</span><span class="o">=</span>network-online.target
</span></span><span class="line"><span class="cl"> <span class="nv">After</span><span class="o">=</span>network-online.target
</span></span><span class="line"><span class="cl"> <span class="nv">RequiresMountsFor</span><span class="o">=</span>%t/containers
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="o">[</span>Service<span class="o">]</span>
</span></span><span class="line"><span class="cl"> <span class="nv">Environment</span><span class="o">=</span><span class="nv">PODMAN_SYSTEMD_UNIT</span><span class="o">=</span>%n
</span></span><span class="line"><span class="cl"> <span class="nv">Restart</span><span class="o">=</span>on-failure
</span></span><span class="line"><span class="cl">  <span class="nv">TimeoutStopSec</span><span class="o">=</span><span class="m">70</span>
</span></span><span class="line"><span class="cl"> <span class="nv">ExecStart</span><span class="o">=</span>/usr/bin/podman run <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--cidfile<span class="o">=</span>%t/%n.ctr-id <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--cgroups<span class="o">=</span>no-conmon <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--rm <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--sdnotify<span class="o">=</span>conmon <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	-d <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--replace <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	-it <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--name rootful-cont-port <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	-p 80:8080 ubi9
</span></span><span class="line"><span class="cl"> <span class="nv">ExecStop</span><span class="o">=</span>/usr/bin/podman stop <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--ignore -t <span class="m">10</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--cidfile<span class="o">=</span>%t/%n.ctr-id
</span></span><span class="line"><span class="cl"> <span class="nv">ExecStopPost</span><span class="o">=</span>/usr/bin/podman rm <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	-f <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--ignore -t <span class="m">10</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--cidfile<span class="o">=</span>%t/%n.ctr-id
</span></span><span class="line"><span class="cl"> <span class="nv">Type</span><span class="o">=</span>notify
</span></span><span class="line"><span class="cl"> <span class="nv">NotifyAccess</span><span class="o">=</span>all
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="o">[</span>Install<span class="o">]</span>
</span></span><span class="line"><span class="cl"> <span class="nv">WantedBy</span><span class="o">=</span>default.target
</span></span></code></pre></div><ul>
<li>Stop and remove the source container rootful-cont-port.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@server30 ~<span class="o">]</span><span class="c1"># podman stop rootful-cont-port</span>
</span></span><span class="line"><span class="cl"> WARN<span class="o">[</span>0010<span class="o">]</span> StopSignal SIGTERM failed to stop  container rootful-cont-port in <span class="m">10</span> seconds, resorting  to SIGKILL 
</span></span><span class="line"><span class="cl"> rootful-cont-port
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@server30 ~<span class="o">]</span><span class="c1"># podman ps</span>
</span></span><span class="line"><span class="cl"> CONTAINER ID  IMAGE                                   COMMAND     CREATED         STATUS         PORTS       NAMES
</span></span><span class="line"><span class="cl"> fe0d07718dda  registry.access.redhat.com/ubi9:latest  /bin/bash   <span class="m">16</span> minutes ago  Up <span class="m">16</span> minutes              rootful-container
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@server30 ~<span class="o">]</span><span class="c1"># podman rm rootfil-cont-port</span>
</span></span><span class="line"><span class="cl"> Error: no container with ID or name <span class="s2">&#34;rootfil-cont- port&#34;</span> found: no such container
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@server30 ~<span class="o">]</span><span class="c1"># podman rm rootful-cont-port</span>
</span></span><span class="line"><span class="cl"> rootful-cont-port
</span></span></code></pre></div><ul>
<li>Add the support for the new service to systemd and enable the service to auto-start at system reboots.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@server30 ~<span class="o">]</span><span class="c1"># systemctl daemon-reload</span>
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@server30 ~<span class="o">]</span><span class="c1"># systemctl enable --now rootful- cont-port</span>
</span></span><span class="line"><span class="cl"> Created symlink  /etc/systemd/system/default.target.wants/rootful- cont-port.service  /etc/systemd/system/rootful-cont- port.service.
</span></span></code></pre></div><ul>
<li>Reboot server10 and confirm a successful start of the container service and the container.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@server30 ~<span class="o">]</span><span class="c1"># reboot</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@server30 ~<span class="o">]</span><span class="c1"># podman ps</span>
</span></span><span class="line"><span class="cl"> CONTAINER ID  IMAGE                                   COMMAND     CREATED             STATUS              PORTS                 NAMES
</span></span><span class="line"><span class="cl"> 5c030407a7d6   registry.access.redhat.com/ubi9:latest  /bin/bash    About a minute ago  Up About a minute  0.0.0.0:80- &gt;8080/tcp  rootful-cont-port
</span></span><span class="line"><span class="cl"> 9d1e8a429ac6   registry.access.redhat.com/ubi9:latest  /bin/bash    About a minute ago  Up About a minute                        rootful-container
</span></span><span class="line"><span class="cl"> <span class="o">[</span>root@server30 ~<span class="o">]</span><span class="c1"># </span>
</span></span></code></pre></div>
<h3 class="relative group">Lab 22-7: Build Custom Image Using Containerfile
    <div id="lab-22-7-build-custom-image-using-containerfile" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#lab-22-7-build-custom-image-using-containerfile" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>As conadm on server10, write a containerfile to use the latest version of ubi8 and create a user account called user-in-container in the resultant custom image.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conadm@server30 ~<span class="o">]</span>$ vim containerfile
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> FROM registry.access.redhat.com/ubi8/ubi:latest
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> RUN useradd -ms /bin/bash -u <span class="m">1001</span> user-in-container
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> USER <span class="m">1001</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conadm@server30 ~<span class="o">]</span>$ podman image build -f  containerfile --no-cache -t ubi8-user .
</span></span><span class="line"><span class="cl"> STEP 1/3: FROM  registry.access.redhat.com/ubi8/ubi:latest
</span></span><span class="line"><span class="cl"> STEP 2/3: RUN useradd -ms /bin/bash -u <span class="m">1001</span> user-in- container
</span></span><span class="line"><span class="cl"> --&gt; b330095e91eb
</span></span><span class="line"><span class="cl"> STEP 3/3: USER <span class="m">1001</span>
</span></span><span class="line"><span class="cl"> COMMIT ubi8-user
</span></span><span class="line"><span class="cl"> --&gt; e8cde30fc020
</span></span><span class="line"><span class="cl"> Successfully tagged localhost/ubi8-user:latest
</span></span><span class="line"><span class="cl"> e8cde30fc020051caa2a4e2f58aaaf90f088709462a1314b936fd608facfdb5e
</span></span></code></pre></div><ul>
<li>Test the image by launching a container in interactive mode and verifying the user.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>conadm@server30 ~<span class="o">]</span>$ podman run -ti --name test12  ubi8-user
</span></span><span class="line"><span class="cl"> <span class="o">[</span>user-in-container@30558ffcb227 /<span class="o">]</span>$
</span></span></code></pre></div>
          
          
          
        </div>
        
        

        
  
  <section class="flex flex-row flex-wrap justify-center pt-4 text-xl">
    
      
        <a
          target="_blank"
          class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
          href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://davidwrites.xyz/tech/containers/containers/&amp;title=Containers"
          title="Share on LinkedIn"
          aria-label="Share on LinkedIn">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
</span>
        </a>
      
    
      
        <a
          target="_blank"
          class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
          href="https://twitter.com/intent/tweet/?url=https://davidwrites.xyz/tech/containers/containers/&amp;text=Containers"
          title="Tweet on Twitter"
          aria-label="Tweet on Twitter">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg></span>
        </a>
      
    
      
        <a
          target="_blank"
          class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
          href="https://bsky.app/intent/compose?text=Containers&#43;https://davidwrites.xyz/tech/containers/containers/"
          title="Post on Bluesky"
          aria-label="Post on Bluesky">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256,232.562c-21.183,-41.196 -78.868,-117.97 -132.503,-155.834c-51.378,-36.272 -70.978,-29.987 -83.828,-24.181c-14.872,6.72 -17.577,29.554 -17.577,42.988c0,13.433 7.365,110.138 12.169,126.281c15.873,53.336 72.376,71.358 124.413,65.574c2.66,-0.395 5.357,-0.759 8.089,-1.097c-2.68,0.429 -5.379,0.796 -8.089,1.097c-76.259,11.294 -143.984,39.085 -55.158,137.972c97.708,101.165 133.908,-21.692 152.484,-83.983c18.576,62.291 39.972,180.718 150.734,83.983c83.174,-83.983 22.851,-126.674 -53.408,-137.969c-2.71,-0.302 -5.409,-0.667 -8.089,-1.096c2.732,0.337 5.429,0.702 8.089,1.096c52.037,5.785 108.54,-12.239 124.413,-65.574c4.804,-16.142 12.169,-112.847 12.169,-126.281c-0,-13.434 -2.705,-36.267 -17.577,-42.988c-12.85,-5.806 -32.45,-12.09 -83.829,24.181c-53.634,37.864 -111.319,114.635 -132.502,155.831Z"/></svg></span>
        </a>
      
    
      
        <a
          target="_blank"
          class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
          href="https://reddit.com/submit/?url=https://davidwrites.xyz/tech/containers/containers/&amp;resubmit=true&amp;title=Containers"
          title="Submit to Reddit"
          aria-label="Submit to Reddit">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M201.5 305.5c-13.8 0-24.9-11.1-24.9-24.6 0-13.8 11.1-24.9 24.9-24.9 13.6 0 24.6 11.1 24.6 24.9 0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4 0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7 0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9 0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5 0 52.6 59.2 95.2 132 95.2 73.1 0 132.3-42.6 132.3-95.2 0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6 0-2.2-2.2-6.1-2.2-8.3 0-2.5 2.5-2.5 6.4 0 8.6 22.8 22.8 87.3 22.8 110.2 0 2.5-2.2 2.5-6.1 0-8.6-2.2-2.2-6.1-2.2-8.3 0zm7.7-75c-13.6 0-24.6 11.1-24.6 24.9 0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.1 24.9-24.6 0-13.8-11-24.9-24.9-24.9z"/></svg>
</span>
        </a>
      
    
      
        <a
          target="_blank"
          class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
          href="https://api.whatsapp.com/send?text=https://davidwrites.xyz/tech/containers/containers/&amp;resubmit=true&amp;title=Containers"
          title="Share via WhatsApp"
          aria-label="Share via WhatsApp">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"/></svg>
</span>
        </a>
      
    
      
        <a
          target="_blank"
          class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
          href="https://t.me/share/url?url=https://davidwrites.xyz/tech/containers/containers/&amp;resubmit=true&amp;title=Containers"
          title="Share via Telegram"
          aria-label="Share via Telegram">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M248,8C111.033,8,0,119.033,0,256S111.033,504,248,504,496,392.967,496,256,384.967,8,248,8ZM362.952,176.66c-3.732,39.215-19.881,134.378-28.1,178.3-3.476,18.584-10.322,24.816-16.948,25.425-14.4,1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25,5.342-39.5,3.652-3.793,67.107-61.51,68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608,69.142-14.845,10.194-26.894,9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7,18.45-13.7,108.446-47.248,144.628-62.3c68.872-28.647,83.183-33.623,92.511-33.789,2.052-.034,6.639.474,9.61,2.885a10.452,10.452,0,0,1,3.53,6.716A43.765,43.765,0,0,1,362.952,176.66Z"/></svg>
</span>
        </a>
      
    
      
        <a
          target="_blank"
          class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
          href="https://pinterest.com/pin/create/bookmarklet/?url=https://davidwrites.xyz/tech/containers/containers/&amp;description=Containers"
          title="Pin on Pinterest"
          aria-label="Pin on Pinterest">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M496 256c0 137-111 248-248 248-25.6 0-50.2-3.9-73.4-11.1 10.1-16.5 25.2-43.5 30.8-65 3-11.6 15.4-59 15.4-59 8.1 15.4 31.7 28.5 56.8 28.5 74.8 0 128.7-68.8 128.7-154.3 0-81.9-66.9-143.2-152.9-143.2-107 0-163.9 71.8-163.9 150.1 0 36.4 19.4 81.7 50.3 96.1 4.7 2.2 7.2 1.2 8.3-3.3.8-3.4 5-20.3 6.9-28.1.6-2.5.3-4.7-1.7-7.1-10.1-12.5-18.3-35.3-18.3-56.6 0-54.7 41.4-107.6 112-107.6 60.9 0 103.6 41.5 103.6 100.9 0 67.1-33.9 113.6-78 113.6-24.3 0-42.6-20.1-36.7-44.8 7-29.5 20.5-61.3 20.5-82.6 0-19-10.2-34.9-31.4-34.9-24.9 0-44.9 25.7-44.9 60.2 0 22 7.4 36.8 7.4 36.8s-24.5 103.8-29 123.2c-5 21.4-3 51.6-.9 71.2C65.4 450.9 0 361.1 0 256 0 119 111 8 248 8s248 111 248 248z"/></svg>
</span>
        </a>
      
    
      
        <a
          target="_blank"
          class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
          href="https://www.facebook.com/sharer/sharer.php?u=https://davidwrites.xyz/tech/containers/containers/&amp;quote=Containers"
          title="Share on Facebook"
          aria-label="Share on Facebook">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>
</span>
        </a>
      
    
      
        <a
          target="_blank"
          class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
          href="mailto:?body=https://davidwrites.xyz/tech/containers/containers/&amp;subject=Containers"
          title="Send via email"
          aria-label="Send via email">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1c-27.64 140.9 68.65 266.2 199.1 285.1c19.01 2.888 36.17-12.26 36.17-31.49l.0001-.6631c0-15.74-11.44-28.88-26.84-31.24c-84.35-12.98-149.2-86.13-149.2-174.2c0-102.9 88.61-185.5 193.4-175.4c91.54 8.869 158.6 91.25 158.6 183.2l0 16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98 .0036c-7.299 0-13.2 4.992-15.12 11.68c-24.85-12.15-54.24-16.38-86.06-5.106c-38.75 13.73-68.12 48.91-73.72 89.64c-9.483 69.01 43.81 128 110.9 128c26.44 0 50.43-9.544 69.59-24.88c24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3C495.1 107.1 361.2-9.332 207.8 20.73zM239.1 304.3c-26.47 0-48-21.56-48-48.05s21.53-48.05 48-48.05s48 21.56 48 48.05S266.5 304.3 239.1 304.3z"/></svg>
</span>
        </a>
      
    
      
        <a
          target="_blank"
          class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
          href="https://line.me/R/share?text=https://davidwrites.xyz/tech/containers/containers/%20Containers"
          title="Share on LINE"
          aria-label="Share on LINE">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Pro 6.4.2 by @fontawesome - https://fontawesome.com License -https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path fill="currentColor" d="M311 196.8v81.3c0 2.1-1.6 3.7-3.7 3.7h-13c-1.3 0-2.4-.7-3-1.5l-37.3-50.3v48.2c0 2.1-1.6 3.7-3.7 3.7h-13c-2.1 0-3.7-1.6-3.7-3.7V196.9c0-2.1 1.6-3.7 3.7-3.7h12.9c1.1 0 2.4 .6 3 1.6l37.3 50.3V196.9c0-2.1 1.6-3.7 3.7-3.7h13c2.1-.1 3.8 1.6 3.8 3.5zm-93.7-3.7h-13c-2.1 0-3.7 1.6-3.7 3.7v81.3c0 2.1 1.6 3.7 3.7 3.7h13c2.1 0 3.7-1.6 3.7-3.7V196.8c0-1.9-1.6-3.7-3.7-3.7zm-31.4 68.1H150.3V196.8c0-2.1-1.6-3.7-3.7-3.7h-13c-2.1 0-3.7 1.6-3.7 3.7v81.3c0 1 .3 1.8 1 2.5c.7 .6 1.5 1 2.5 1h52.2c2.1 0 3.7-1.6 3.7-3.7v-13c0-1.9-1.6-3.7-3.5-3.7zm193.7-68.1H327.3c-1.9 0-3.7 1.6-3.7 3.7v81.3c0 1.9 1.6 3.7 3.7 3.7h52.2c2.1 0 3.7-1.6 3.7-3.7V265c0-2.1-1.6-3.7-3.7-3.7H344V247.7h35.5c2.1 0 3.7-1.6 3.7-3.7V230.9c0-2.1-1.6-3.7-3.7-3.7H344V213.5h35.5c2.1 0 3.7-1.6 3.7-3.7v-13c-.1-1.9-1.7-3.7-3.7-3.7zM512 93.4V419.4c-.1 51.2-42.1 92.7-93.4 92.6H92.6C41.4 511.9-.1 469.8 0 418.6V92.6C.1 41.4 42.2-.1 93.4 0H419.4c51.2 .1 92.7 42.1 92.6 93.4zM441.6 233.5c0-83.4-83.7-151.3-186.4-151.3s-186.4 67.9-186.4 151.3c0 74.7 66.3 137.4 155.9 149.3c21.8 4.7 19.3 12.7 14.4 42.1c-.8 4.7-3.8 18.4 16.1 10.1s107.3-63.2 146.5-108.2c27-29.7 39.9-59.8 39.9-93.1z" /></svg></span>
        </a>
      
    
  </section>


        

      </div>

      
      
        
        
          
          
        
        
        
        <script
          type="text/javascript"
          src="/js/page.min.54b6f4371722649edbe871e431d8670d670878c22be8f36e229fe53cc9b786fe25a834def5e6de621f7a3e37b72bc8cd73839aa5ed907ed6cbd45cd3e1b0fa20.js"
          integrity="sha512-VLb0NxciZJ7b6HHkMdhnDWcIeMIr6PNuIp/lPMm3hv4lqDTe9ebeYh96Pje3K8jNc4Oape2QftbL1FzT4bD6IA=="
          data-oid="views_tech/containers/Containers.md"
          data-oid-likes="likes_tech/containers/Containers.md"></script>
      
    </section>

    
    <footer class="pt-8 max-w-prose print:hidden">
      

      
    </footer>
  </article>

        


  






<div
  id="scroll-to-top"
  class="fixed bottom-6 end-6 z-50 transform translate-y-4 opacity-0 duration-200">
  <a
    href="#the-top"
    class="pointer-events-auto flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="Scroll to top"
    title="Scroll to top">
    &uarr;
  </a>
</div>

      </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
      
      
        
      
      
      
      
      <nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400 overflow-x-auto py-2">
        <ul class="flex list-none flex-row">
          
            <li class=" flex mb-1 text-end sm:mb-0 sm:me-7 sm:last:me-0 me-4">
              <a
                class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center"
                href=""
                title="">
                
                
              </a>
            </li>
          
        </ul>
      </nav>
    
  
  <div class="flex items-center justify-between">
    
    
      <p class="text-sm text-neutral-500 dark:text-neutral-400">
          &copy;
          2025
          
      </p>
    

    
    
  </div>
  
    <script>
      mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
        margin: 24,
        background: "rgba(0,0,0,0.5)",
        scrollOffset: 0,
      });
    </script>
  
  
  
  <script
    type="text/javascript"
    src="/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js"
    integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh&#43;sCQ0E53ghYrxgYqw&#43;0GCRyIEpA=="></script>
  
  
</footer>
<div
  id="search-wrapper"
  class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh] z-500"
  data-url="https://davidwrites.xyz/">
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800">
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="Search"
          tabindex="0">
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="Close (Esc)">
        <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

    </div>
  </body>
  
</html>
